"use strict";var jsxRuntime=require("react/jsx-runtime"),e=require("react"),styled=require("styled-components"),index=require("../../themes/light/index.cjs.js");require("../../themes/common/locales.cjs.js"),require("../../Typography/typography.cjs.js"),require("../../Typography/defaultTypographyMixin.cjs.js");var index$1=require("../NumberInput/index.cjs.js"),index$2=require("../../Range/index.cjs.js"),utils=require("../NumberInput/utils.cjs.js"),Container=require("../Container.cjs.js"),changeInputData=require("../../common/dom/changeInputData.cjs.js");function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var styled__default=_interopDefault(styled);const Wrapper=styled__default.default.div`
  position: relative;

  pointer-events: ${p=>p.skeleton?"none":"all"};
  ${({skeleton})=>skeleton&&Container.skeletonMixin};
`,InputsWrapper=styled__default.default.div`
  display: flex;
  margin-bottom: 16px;
  [data-dimension='s'] & {
    margin-bottom: 12px;
  }
  & > div:first-child {
    margin-right: 8px;
  }
  & > div {
    width: 100%;
  }
`,SliderRange=({dimension,minValue=0,maxValue=20,step=1,precision=0,thousand:userThousand,decimal:userDecimal,prefix,suffix,placeholder,value,defaultValue,onChange,input1:input1Props,input2:input2Props,disabled,skeleton=!1,readOnly,...props})=>{const rangeDimension="s"===dimension?dimension:"m",theme=styled.useTheme()||index.LIGHT_THEME,decimal=userDecimal?.slice(0,1)??utils.getDecimalSeparator(theme.currentLocale),thousand=void 0!==userThousand&&utils.validateThousand(userThousand)?userThousand.slice(0,1):utils.getThousandSeparator(theme.currentLocale),input1Ref=e.useRef(null),input2Ref=e.useRef(null),[slider1,setSlider1]=e.useState(minValue),[slider2,setSlider2]=e.useState(maxValue),[innerInput1State,setInnerInput1State]=e.useState(defaultValue?.[0]||""),[innerInput2State,setInnerInput2State]=e.useState(defaultValue?.[1]||""),input1=value?.[0]||innerInput1State,input2=value?.[1]||innerInput2State,getFull=str=>utils.fitToCurrency(String(str),precision,decimal,thousand,!0);e.useEffect(()=>{if(""===input1)setSlider1(minValue);else{const newSlider1=Number(utils.clearValue(input1,precision,decimal).replace(decimal,"."));setSlider1(newSlider1)}},[input1,minValue,precision,decimal]),e.useEffect(()=>{if(""===input2)setSlider2(maxValue);else{const newSlider2=Number(utils.clearValue(input2,precision,decimal).replace(decimal,"."));setSlider2(newSlider2)}},[input2,maxValue,precision,decimal]);const inputProps={dimension,precision,thousand,decimal,suffix,disabled,readOnly,displayPlusMinusIcons:!1,step};return jsxRuntime.jsxs(Wrapper,{"data-dimension":dimension,...props,children:[jsxRuntime.jsxs(InputsWrapper,{children:[jsxRuntime.jsx(index$1.NumberInput,{ref:input1Ref,value:input1,prefix:prefix?.[0],placeholder:placeholder?.[0],skeleton,onChange:event=>{const newSlider1=Number(utils.clearValue(event.target.value,precision,decimal).replace(decimal,".")||minValue);setInnerInput1State(event.target.value),onChange?.([{str:event.target.value,num:newSlider1},{str:input2,num:slider2}],event)},onBlur:()=>{const value1Num=Number(utils.clearValue(input1,precision,decimal).replace(decimal,".")||minValue),value2Num=Number(utils.clearValue(input2,precision,decimal).replace(decimal,".")||maxValue);value1Num<minValue?input1Ref.current&&changeInputData.changeInputData(input1Ref.current,{value:getFull(minValue)}):value1Num>value2Num-step&&input1Ref.current&&changeInputData.changeInputData(input1Ref.current,{value:getFull(value2Num-step)})},...input1Props,...inputProps}),jsxRuntime.jsx(index$1.NumberInput,{ref:input2Ref,value:input2,prefix:prefix?.[1],placeholder:placeholder?.[1],skeleton,onChange:event=>{const newSlider2=Number(utils.clearValue(event.target.value,precision,decimal).replace(decimal,".")||maxValue);setInnerInput2State(event.target.value),onChange?.([{str:input1,num:slider1},{str:event.target.value,num:newSlider2}],event)},onBlur:()=>{const value1Num=Number(utils.clearValue(input1,precision,decimal).replace(decimal,".")||minValue),value2Num=Number(utils.clearValue(input2,precision,decimal).replace(decimal,".")||maxValue);value2Num>maxValue?input2Ref.current&&changeInputData.changeInputData(input2Ref.current,{value:getFull(maxValue)}):value2Num<value1Num+step&&input2Ref.current&&changeInputData.changeInputData(input2Ref.current,{value:getFull(value1Num+step)})},...input2Props,...inputProps})]}),jsxRuntime.jsx(index$2.Range,{value:[slider1,slider2],skeleton,onChange:(_event,value)=>{const[newSld1,newSld2]=value,newSlider1=newSld1<minValue?minValue:newSld1,newSlider2=newSld2>maxValue?maxValue:newSld2;input1Ref.current&&changeInputData.changeInputData(input1Ref.current,{value:getFull(newSlider1)}),input2Ref.current&&changeInputData.changeInputData(input2Ref.current,{value:getFull(newSlider2)})},onMouseDown:e=>{e.preventDefault()},onRangeMouseUp:()=>{slider1==slider2&&slider1+step<=maxValue?input2Ref.current&&changeInputData.changeInputData(input2Ref.current,{value:getFull(slider2+step)}):slider1==slider2&&slider1+step>maxValue&&input1Ref.current&&changeInputData.changeInputData(input1Ref.current,{value:getFull(slider1-step)})},minValue,maxValue,step,dimension:rangeDimension,disabled:disabled||readOnly})]})};SliderRange.displayName="SliderRange",exports.SliderRange=SliderRange;
//# sourceMappingURL=index.cjs.js.map
