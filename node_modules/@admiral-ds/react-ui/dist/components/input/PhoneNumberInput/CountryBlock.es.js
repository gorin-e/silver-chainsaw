import{jsxs,Fragment,jsx}from"react/jsx-runtime";import{forwardRef,useRef,useState,useLayoutEffect}from"react";import styled from"styled-components";import{Flag}from"./Flag.es.js";import{FlagsPack as wp}from"../../../node_modules/@admiral-ds/flags/dist/index.es.es.js";import{MenuItem}from"../../Menu/MenuItem.es.js";import{Tooltip}from"../../Tooltip/index.es.js";import{checkOverflow}from"../../common/utils/checkOverflow.es.js";import{refSetter}from"../../common/utils/refSetter.es.js";const StyledCountryBlock=styled(MenuItem)`
  display: flex;
  justify-content: flex-start;
  flex-flow: nowrap;
  cursor: ${p=>p.disabled?"not-allowed":"pointer"};
`,StyledFlag=styled(Flag)`
  flex-shrink: 0;
`,StyledCountryName=styled.span`
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding: 0 9px;
`,CountryCode=styled.span`
  flex: 0 0 auto;
  color: var(--admiral-color-Neutral_Neutral50, ${p=>p.theme.color["Neutral/Neutral 50"]});
`,CountryBlock=forwardRef((props,ref)=>{const{dimension,value,code,name,...otherProps}=props,wrapperRef=useRef(null),textRef=useRef(null),[overflow,setOverflow]=useState(!1),[tooltipVisible,setTooltipVisible]=useState(!1);useLayoutEffect(()=>{const element=textRef.current;element&&checkOverflow(element)!==overflow&&setOverflow(checkOverflow(element))},[tooltipVisible,setOverflow]),useLayoutEffect(()=>{function show(){setTooltipVisible(!0)}function hide(){setTooltipVisible(!1)}const wrapper=wrapperRef.current;if(wrapper)return wrapper.addEventListener("mouseenter",show),wrapper.addEventListener("mouseleave",hide),wrapper.addEventListener("focus",show),wrapper.addEventListener("blur",hide),()=>{wrapper.removeEventListener("mouseenter",show),wrapper.removeEventListener("mouseleave",hide),wrapper.removeEventListener("focus",show),wrapper.removeEventListener("blur",hide)}},[setTooltipVisible]);const SvgFlag=wp[name];return jsxs(Fragment,{children:[jsxs(StyledCountryBlock,{dimension,ref:refSetter(ref,wrapperRef),...otherProps,children:[SvgFlag&&jsx(StyledFlag,{dimension,Component:SvgFlag}),jsx(StyledCountryName,{ref:textRef,children:value}),jsx(CountryCode,{children:code})]}),tooltipVisible&&overflow&&jsx(Tooltip,{targetElement:wrapperRef.current,renderContent:()=>value})]})});export{CountryBlock};
//# sourceMappingURL=CountryBlock.es.js.map
