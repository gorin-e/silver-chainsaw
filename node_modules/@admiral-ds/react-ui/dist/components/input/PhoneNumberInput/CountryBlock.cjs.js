"use strict";var jsxRuntime=require("react/jsx-runtime"),e=require("react"),styled=require("styled-components"),Flag=require("./Flag.cjs.js"),index_es=require("../../../node_modules/@admiral-ds/flags/dist/index.es.cjs.js"),MenuItem=require("../../Menu/MenuItem.cjs.js"),index=require("../../Tooltip/index.cjs.js"),checkOverflow=require("../../common/utils/checkOverflow.cjs.js"),refSetter=require("../../common/utils/refSetter.cjs.js");function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var styled__default=_interopDefault(styled);const StyledCountryBlock=styled__default.default(MenuItem.MenuItem)`
  display: flex;
  justify-content: flex-start;
  flex-flow: nowrap;
  cursor: ${p=>p.disabled?"not-allowed":"pointer"};
`,StyledFlag=styled__default.default(Flag.Flag)`
  flex-shrink: 0;
`,StyledCountryName=styled__default.default.span`
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding: 0 9px;
`,CountryCode=styled__default.default.span`
  flex: 0 0 auto;
  color: var(--admiral-color-Neutral_Neutral50, ${p=>p.theme.color["Neutral/Neutral 50"]});
`,CountryBlock=e.forwardRef((props,ref)=>{const{dimension,value,code,name,...otherProps}=props,wrapperRef=e.useRef(null),textRef=e.useRef(null),[overflow,setOverflow]=e.useState(!1),[tooltipVisible,setTooltipVisible]=e.useState(!1);e.useLayoutEffect(()=>{const element=textRef.current;element&&checkOverflow.checkOverflow(element)!==overflow&&setOverflow(checkOverflow.checkOverflow(element))},[tooltipVisible,setOverflow]),e.useLayoutEffect(()=>{function show(){setTooltipVisible(!0)}function hide(){setTooltipVisible(!1)}const wrapper=wrapperRef.current;if(wrapper)return wrapper.addEventListener("mouseenter",show),wrapper.addEventListener("mouseleave",hide),wrapper.addEventListener("focus",show),wrapper.addEventListener("blur",hide),()=>{wrapper.removeEventListener("mouseenter",show),wrapper.removeEventListener("mouseleave",hide),wrapper.removeEventListener("focus",show),wrapper.removeEventListener("blur",hide)}},[setTooltipVisible]);const SvgFlag=index_es.FlagsPack[name];return jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[jsxRuntime.jsxs(StyledCountryBlock,{dimension,ref:refSetter.refSetter(ref,wrapperRef),...otherProps,children:[SvgFlag&&jsxRuntime.jsx(StyledFlag,{dimension,Component:SvgFlag}),jsxRuntime.jsx(StyledCountryName,{ref:textRef,children:value}),jsxRuntime.jsx(CountryCode,{children:code})]}),tooltipVisible&&overflow&&jsxRuntime.jsx(index.Tooltip,{targetElement:wrapperRef.current,renderContent:()=>value})]})});exports.CountryBlock=CountryBlock;
//# sourceMappingURL=CountryBlock.cjs.js.map
