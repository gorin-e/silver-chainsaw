import{jsx}from"react/jsx-runtime";import{forwardRef,useState,useRef,useEffect}from"react";import styled,{css}from"styled-components";import{keyboardKey}from"../../common/keyboardKey.es.js";import{mediumGroupBorderRadius}from"../../themes/borderRadius.es.js";import{parseShadow}from"../../common/utils/parseShadowFromTheme.es.js";import{MenuItem}from"../../Menu/MenuItem.es.js";const menuListHeights=css`
  max-height: ${({$dimension,$maxHeight})=>{if($maxHeight)return $maxHeight;switch($dimension){case"l":default:return"304px";case"m":return"256px";case"s":return"208px"}}};
`,Wrapper=styled.div`
  pointer-events: initial;
  background-color: var(--admiral-color-Special_ElevatedBG, ${p=>p.theme.color["Special/Elevated BG"]});
  border-radius: var(--admiral-border-radius-Medium, ${p=>mediumGroupBorderRadius(p.theme.shape)});
  box-shadow: var(--admiral-box-shadow-Shadow08, ${p=>parseShadow(p.theme.shadow["Shadow 08"])});
  max-width: calc(100vw - 32px);
  border-color: transparent;
  ${menuListHeights};
  overflow-x: hidden;
  overflow-y: auto;
  scroll-behavior: smooth;
`,StyledDiv=styled.div`
  margin: 0;
  padding: 8px 0;
  appearance: none;
  flex: 0 0 auto;
  border: none;
`;function defaultOptionRender({value,key,...props}){return jsx(MenuItem,{...props,children:String(value)},key)}const Menu=forwardRef(({options,selected,renderOption=defaultOptionRender,onSelect,dimension,maxHeight,preventFocusSteal,...props},ref)=>{const[activeOption,setActiveOption]=useState(null),menuRef=useRef(null);useEffect(()=>{function handleKeyDown(e){switch(keyboardKey.getCode(e)){case keyboardKey[" "]:case keyboardKey.Enter:activeOption&&onSelect(activeOption),e.preventDefault();break;case keyboardKey.ArrowDown:setActiveOption((()=>{const currentIndex=selected?options.indexOf(activeOption||selected):0;return currentIndex+1>options.length?options[0]:options[currentIndex+1]})()),e.preventDefault();break;case keyboardKey.ArrowUp:setActiveOption((()=>{const currentIndex=selected?options.indexOf(activeOption||selected):0;return currentIndex-1<0?options[options.length-1]:options[currentIndex-1]})()),e.preventDefault()}}return document.addEventListener("keydown",handleKeyDown),()=>{document.removeEventListener("keydown",handleKeyDown)}},[activeOption]);return useEffect(()=>{const hoveredItem=menuRef.current?.querySelector('[data-hovered="true"]');hoveredItem?.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[activeOption]),jsx(Wrapper,{ref,$dimension:dimension,$maxHeight:maxHeight,...props,children:jsx(StyledDiv,{ref:menuRef,children:options.map((option,index)=>renderOption({key:index,value:option,hovered:option===activeOption,selected:option===selected,onHover:()=>setActiveOption(option),onClick:()=>onSelect(option),onMouseDown:preventFocusSteal?e=>e.preventDefault():void 0,dimension}))})})});Menu.displayName="Menu";export{Menu};
//# sourceMappingURL=Menu.es.js.map
