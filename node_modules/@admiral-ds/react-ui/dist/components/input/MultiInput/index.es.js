import{jsx,jsxs}from"react/jsx-runtime";import{forwardRef,useRef,useState,Children,useLayoutEffect}from"react";import{Container,IconPanelBefore,WrapperOptions,Input,IconPanelAfter}from"./styled.es.js";import{InputBorderedDiv}from"../TextInput/index.es.js";import{InputIconButton}from"../../InputIconButton.es.js";import{ReactComponent as SvgCloseOutline}from"../../../node_modules/@admiral-ds/icons/build/service/CloseOutline.svg.es.js";import{refSetter}from"../../common/utils/refSetter.es.js";const nothing=()=>{},preventDefault=e=>e.preventDefault();function pressDeleteButtonOnLastChip(input,optionsWrapper,lastChipCloseButtonSelector){if(input&&optionsWrapper&&0===input.selectionStart&&0===input.selectionEnd){const closeButton=optionsWrapper.querySelector(lastChipCloseButtonSelector);closeButton?.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0}))}}const MultiInput=forwardRef(({style,status,children,className,skeleton=!1,displayClearIcon,containerRef,disableCopying,dimension="m",createActivateButtonList=["Enter"],onInputComplete,containerPropsConfig=nothing,clearButtonPropsConfig=nothing,onClearOptions,iconsBefore,iconsAfter,lastChipCloseButtonSelector=".wrapper-options > :has(.close-button):last-of-type .close-button",onBackspaceKeyDown:onLastChipDelete=pressDeleteButtonOnLastChip,...props},ref)=>{const inputRef=useRef(null),[refWrapperOptions,setRefWrapperOptions]=useState(null),iconAfterArray=Children.toArray(iconsAfter),iconBeforeArray=Children.toArray(iconsBefore);if(displayClearIcon&&!props.readOnly&&!disableCopying){const clearButtonProps={icon:SvgCloseOutline,id:"searchSelectClearIcon",onClick:onClearOptions,"aria-hidden":!0,key:"close"};iconAfterArray.unshift(jsx(InputIconButton,{...clearButtonProps,...clearButtonPropsConfig(clearButtonProps)}))}const containerProps={ref:containerRef,className,style,$skeleton:skeleton,$status:status,disabled:props.disabled,readOnly:props.readOnly,$dimension:dimension,tabIndex:-1,"data-disabled":!!props.disabled||void 0,"data-read-only":!!props.readOnly||void 0,"data-status":status,"data-disable-copying":!!disableCopying||void 0,onMouseDown:disableCopying?preventDefault:void 0,onFocus:e=>{"input"!==e.target.tagName.toLowerCase()&&inputRef.current&&inputRef.current.focus()}};useLayoutEffect(()=>{function handleKeyDown(e){createActivateButtonList.includes(e.code)&&onInputComplete&&onInputComplete(),"Backspace"===e.code&&onLastChipDelete(this,refWrapperOptions,lastChipCloseButtonSelector)}if(!props.disabled&&!props.readOnly&&!disableCopying){const inputElem=inputRef.current;if(inputElem)return inputElem.addEventListener("keydown",handleKeyDown),()=>{inputElem.removeEventListener("keydown",handleKeyDown)}}},[props.disabled,props.readOnly,disableCopying,refWrapperOptions,onInputComplete,inputRef]);const iconsBeforeCount=iconBeforeArray.length,iconsAfterCount=iconAfterArray.length;return jsxs(Container,{...containerProps,...containerPropsConfig(containerProps),children:[iconsBeforeCount>0&&jsx(IconPanelBefore,{"data-role":"icon-pane-before",$dimension:dimension,children:iconBeforeArray}),jsxs(WrapperOptions,{className:"wrapper-options",ref:elem=>setRefWrapperOptions(elem),children:[children," ",jsx(Input,{$dimension:dimension,...props,ref:refSetter(ref,inputRef)})]}),jsx(InputBorderedDiv,{$status:status,disabled:props.disabled||props.readOnly}),iconsAfterCount>0&&jsx(IconPanelAfter,{"data-role":"icon-pane-after",$dimension:dimension,children:iconAfterArray})]})});MultiInput.displayName="MultiInput";export{MultiInput};
//# sourceMappingURL=index.es.js.map
