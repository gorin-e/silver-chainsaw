"use strict";var jsxRuntime=require("react/jsx-runtime"),e=require("react"),styled=require("styled-components"),index=require("../../themes/light/index.cjs.js");require("../../themes/common/locales.cjs.js");var typography=require("../../Typography/typography.cjs.js");require("../../Typography/defaultTypographyMixin.cjs.js");var changeInputData=require("../../common/dom/changeInputData.cjs.js"),refSetter=require("../../common/utils/refSetter.cjs.js"),CloseOutline=require("../../../node_modules/@admiral-ds/icons/build/service/CloseOutline.svg.cjs.js"),MinusOutline=require("../../../node_modules/@admiral-ds/icons/build/service/MinusOutline.svg.cjs.js"),PlusOutline=require("../../../node_modules/@admiral-ds/icons/build/service/PlusOutline.svg.cjs.js"),InputIconButton=require("../../InputIconButton.cjs.js"),keyboardKey=require("../../common/keyboardKey.cjs.js"),Container=require("../Container.cjs.js"),AutoSizeInput=require("./AutoSizeInput.cjs.js"),utils=require("./utils.cjs.js"),createNumberInputHandler=require("./createNumberInputHandler.cjs.js");function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var styled__default=_interopDefault(styled);const extraPadding=styled.css`
  padding-right: ${props=>AutoSizeInput.horizontalPaddingValue(props)+(AutoSizeInput.iconSizeValue(props)+8)*(props.$iconsAfterCount??0)}px;
`,preventDefault=e=>e.preventDefault(),PlusMinusIcon=styled__default.default(InputIconButton.InputIconButton)`
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  ${({disabled,theme})=>disabled?styled.css`
          cursor: not-allowed;

          & *[fill^='#'],
          &:hover *[fill^='#'] {
            fill: var(--admiral-color-Neutral_Neutral30, ${theme.color["Neutral/Neutral 30"]});
          }
        `:""}
`,IconPanel=styled__default.default.div`
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;

  display: flex;
  align-items: center;
  margin-right: ${AutoSizeInput.horizontalPaddingValue}px;

  & svg {
    display: block;
    width: ${AutoSizeInput.iconSizeValue}px;
  }

  & > * {
    margin-left: 8px;
  }
`,Content=styled__default.default.div`
  display: flex;
  box-sizing: border-box;
  width: 100%;
  overflow: hidden;
  padding: 0 ${AutoSizeInput.horizontalPaddingValue}px;
  ${extraPadding};
  border-radius: inherit;
`,Wrapper=styled__default.default(Container.HeightLimitedContainer)`
  background-color: ${({disabled,readOnly,theme})=>disabled||readOnly?`var(--admiral-color-Neutral_Neutral10, ${theme.color["Neutral/Neutral 10"]})`:`var(--admiral-color-Neutral_Neutral00, ${theme.color["Neutral/Neutral 00"]})`};
  color: ${({disabled,theme})=>disabled?`var(--admiral-color-Neutral_Neutral30, ${theme.color["Neutral/Neutral 30"]})`:`var(--admiral-color-Neutral_Neutral90, ${theme.color["Neutral/Neutral 90"]})`};
  ${({$dimension})=>"s"===$dimension?typography.typography["Body/Body 2 Long"]:typography.typography["Body/Body 1 Long"]}
  overflow: hidden;
  ${({disabled})=>disabled?"cursor: not-allowed;":""}

  &:hover:not(:focus-within) ${AutoSizeInput.BorderedDiv} {
    border: 1px solid
      ${({disabled,readOnly,$status,theme})=>disabled||readOnly?"transparent":"error"===$status?`var(--admiral-color-Error_Error70, ${theme.color["Error/Error 70"]})`:"success"===$status?`var(--admiral-color-Success_Success60, ${theme.color["Success/Success 60"]})`:`var(--admiral-color-Neutral_Neutral60, ${theme.color["Neutral/Neutral 60"]})`};
  }
  &:hover:not(:focus-within) input:user-invalid + ${AutoSizeInput.BorderedDiv} {
    border: 1px solid var(--admiral-color-Error_Error70, ${p=>p.theme.color["Error/Error 70"]});
  }
`,NumberInput=e.forwardRef(({className,style,containerRef,status,icons,iconsAfter,displayClearIcon=!1,displayPlusMinusIcons=!0,prefix,suffix,precision=2,thousand:userThousand,decimal:userDecimal,fillEmptyDecimals=!0,step=1,minValue=Number.NEGATIVE_INFINITY,maxValue=Number.POSITIVE_INFINITY,placeholder,align="left",skeleton=!1,onChange,onBlur,createInputHandler=createNumberInputHandler.createNumberInputHandler,handleInput,disableCopying,...props},ref)=>{const[plusDisabled,setPlusDisabled]=e.useState(!1),[minusDisabled,setMinusDisabled]=e.useState(!1),[innerValueState,setInnerValueState]=e.useState(props.defaultValue),innerValue=props.value??innerValueState,inputRef=e.useRef(null),theme=styled.useTheme()||index.LIGHT_THEME,thousand=void 0!==userThousand&&utils.validateThousand(userThousand)?userThousand.slice(0,1):utils.getThousandSeparator(theme.currentLocale),decimal=userDecimal?.slice(0,1)??utils.getDecimalSeparator(theme.currentLocale);e.useEffect(()=>{if(innerValue||0===innerValue){const num=Number(utils.clearValue(String(innerValue),precision,decimal).replace(decimal,"."));setMinusDisabled(num<=minValue),setPlusDisabled(num>=maxValue)}else setMinusDisabled(!1),setPlusDisabled(!1)},[innerValue]);const handleMinus=()=>{const current=inputRef.current?.value||"0",num=Number(utils.clearValue(current,precision,decimal).replace(decimal,"."))-step,newValue=Math.min(Math.max(num,minValue),maxValue),newValueStr=utils.fitToCurrency(newValue.toFixed(precision),precision,decimal,thousand,fillEmptyDecimals);inputRef.current&&changeInputData.changeInputData(inputRef.current,{value:newValueStr})},handlePlus=()=>{const current=inputRef.current?.value||"0",num=Number(utils.clearValue(current,precision,decimal).replace(decimal,"."))+step,newValue=Math.min(Math.max(num,minValue),maxValue),newValueStr=utils.fitToCurrency(newValue.toFixed(precision),precision,decimal,thousand,fillEmptyDecimals);inputRef.current&&changeInputData.changeInputData(inputRef.current,{value:newValueStr})},iconArray=e.Children.toArray(iconsAfter||icons);!props.readOnly&&displayClearIcon&&innerValue&&iconArray.unshift(jsxRuntime.jsx(InputIconButton.InputIconButton,{icon:CloseOutline.ReactComponent,onClick:()=>{inputRef.current&&changeInputData.changeInputData(inputRef.current,{value:""})},"aria-hidden":!0},"clear-icon")),!props.readOnly&&displayPlusMinusIcons&&iconArray.push(jsxRuntime.jsx(PlusMinusIcon,{icon:MinusOutline.ReactComponent,onClick:props.disabled||minusDisabled?void 0:handleMinus,disabled:props.disabled||minusDisabled,"aria-hidden":!0},"minus-icon"),jsxRuntime.jsx(PlusMinusIcon,{icon:PlusOutline.ReactComponent,onClick:props.disabled||plusDisabled?void 0:handlePlus,disabled:props.disabled||plusDisabled,"aria-hidden":!0},"plus-icon"));const iconCount=iconArray.length,handler=e.useMemo(()=>handleInput||createInputHandler({precision,decimal,thousand,minValue,maxValue}),[precision,decimal,thousand,minValue,maxValue,handleInput]);return jsxRuntime.jsxs(Wrapper,{ref:containerRef,className,style,disabled:props.disabled,$dimension:props.dimension,readOnly:props.readOnly,"data-read-only":!!props.readOnly||void 0,"data-disable-copying":!!disableCopying||void 0,onMouseDown:disableCopying?preventDefault:void 0,$skeleton:skeleton,$status:status,children:[jsxRuntime.jsx(Content,{$dimension:props.dimension,$iconsAfterCount:iconCount,onKeyDown:e=>{switch(keyboardKey.keyboardKey.getCode(e)){case keyboardKey.keyboardKey.ArrowUp:handlePlus(),e.preventDefault();break;case keyboardKey.keyboardKey.ArrowDown:handleMinus(),e.preventDefault()}},children:jsxRuntime.jsx(AutoSizeInput.AutoSizeInput,{ref:refSetter.refSetter(ref,inputRef),onChange:event=>{setInnerValueState(event.currentTarget.value),onChange?.(event)},placeholder,onBlur:event=>{const newValue=utils.fitToCurrency(event.target.value,precision,decimal,thousand,fillEmptyDecimals);inputRef.current&&newValue!==event.target.value&&changeInputData.changeInputData(inputRef.current,{value:newValue}),onBlur?.(event)},suffix,prefix,status,iconCount,align,innerValue,handleInput:handler,...props})}),iconCount>0&&jsxRuntime.jsx(IconPanel,{disabled:props.disabled,$dimension:props.dimension,children:iconArray})]})});NumberInput.displayName="NumberInput",exports.clearValue=utils.clearValue,exports.fitToCurrency=utils.fitToCurrency,exports.NumberInput=NumberInput;
//# sourceMappingURL=index.cjs.js.map
