import{jsxs,jsx}from"react/jsx-runtime";import*as e from"react";import{useEffect}from"react";import styled,{css}from"styled-components";import{ErrorBlock}from"./ErrorBlock.es.js";import{Spinner}from"../../Spinner/index.es.js";import{Tooltip}from"../../Tooltip/index.es.js";import{formatBytes,dataTransferConstructorSupported}from"./utils.es.js";import{ReactComponent as SvgFilePdfSolid}from"../../../node_modules/@admiral-ds/icons/build/documents/FilePDFSolid.svg.es.js";import{ReactComponent as SvgFilePptSolid}from"../../../node_modules/@admiral-ds/icons/build/documents/FilePPTSolid.svg.es.js";import{ReactComponent as SvgFileWordSolid}from"../../../node_modules/@admiral-ds/icons/build/documents/FileWordSolid.svg.es.js";import{ReactComponent as SvgFileXlsSolid}from"../../../node_modules/@admiral-ds/icons/build/documents/FileXLSSolid.svg.es.js";import{ReactComponent as SvgDocsSolid}from"../../../node_modules/@admiral-ds/icons/build/documents/DocsSolid.svg.es.js";import{ReactComponent as SvgJpgSolid}from"../../../node_modules/@admiral-ds/icons/build/documents/JpgSolid.svg.es.js";import{ReactComponent as SvgCloseOutline}from"../../../node_modules/@admiral-ds/icons/build/service/CloseOutline.svg.es.js";import{mediumGroupBorderRadius}from"../../themes/borderRadius.es.js";import{checkOverflow}from"../../common/utils/checkOverflow.es.js";const Container=styled.div`
  display: flex;
  flex-direction: column;
  flex: ${p=>"xl"===p.$dimension?"1 1 36%":"1 1 auto"};
  margin-top: 16px;
  overflow: hidden;

  &:nth-of-type(even) {
    margin-left: ${p=>"xl"===p.$dimension?"16px":"0"};
  }
`,statusMixin=css`
  border-color: ${p=>"Error"===p.$status?`var(--admiral-color-Error_Error60Main, ${p.theme.color["Error/Error 60 Main"]})`:`var(--admiral-color-Neutral_Neutral40, ${p.theme.color["Neutral/Neutral 40"]})`};
  color: ${p=>"Queue"===p.$status?`var(--admiral-color-Neutral_Neutral30, ${p.theme.color["Neutral/Neutral 30"]})`:`var(--admiral-color-Neutral_Neutral90, ${p.theme.color["Neutral/Neutral 90"]})`};
  background: var(--admiral-color-Special_StaticWhite, ${p=>p.theme.color["Special/Static White"]});
`,PreviewWrapper=styled.div`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  border-radius: var(--admiral-border-radius-Medium, ${p=>mediumGroupBorderRadius(p.theme.shape)});
  border-width: 1px;
  border-style: solid;
  padding: ${p=>"xl"===p.$fileDimension?"7px 3px 7px 8px":"7px 15px"};
  ${statusMixin};
`,InfoBlock=styled.div`
  display: ${p=>"m"===p.$dimension?"block":"flex"};
  align-items: center;
  overflow: hidden;
`,ImagePreview=styled.div`
  min-width: 40px;
  width: 40px;
  height: 40px;
  border-radius: 4px;
  margin-right: 8px;
  overflow: hidden;

  > img {
    height: 100%;
    width: 100%;
  }
`,IconWrapper=styled.div`
  margin-right: 8px;
  border-radius: 4px;

  & svg {
    width: 40px;
    height: 40px;
    fill: ${p=>"Queue"===p.$status?`var(--admiral-color-Neutral_Neutral30, ${p.theme.color["Neutral/Neutral 30"]})`:`var(--admiral-color-Neutral_Neutral50, ${p.theme.color["Neutral/Neutral 50"]})`};
  }
`,sizeMixin=css`
  align-items: center;
  justify-content: space-between;
`,Content=styled.div`
  ${p=>"m"===p.$fileDimension&&sizeMixin};
  display: flex;
  flex-direction: ${p=>"m"===p.$fileDimension?"row":"column"};
  min-width: 0;
`,Title=styled.div`
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
`,Size=styled.span`
  color: ${p=>"Queue"===p.$status?`var(--admiral-color-Neutral_Neutral30, ${p.theme.color["Neutral/Neutral 30"]})`:`var(--admiral-color-Neutral_Neutral50, ${p.theme.color["Neutral/Neutral 50"]})`};
  margin-left: ${p=>"xl"===p.$fileDimension?"0":"4px"};
  white-space: nowrap;
`,FunctionalWrapper=styled.div`
  display: flex;
  flex: 0 0 auto;
  margin-left: 8px;
`,StyledSpinner=styled(Spinner)`
  margin-right: 8px;
`,Close=styled.div`
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 32px;
  height: 32px;
  &:hover {
    border-radius: 50%;
    background-color: var(--admiral-color-Opacity_Hover, ${p=>p.theme.color["Opacity/Hover"]});
  }
  & svg {
    width: 24px;
    height: 24px;
    fill: var(--admiral-color-Neutral_Neutral50, ${p=>p.theme.color["Neutral/Neutral 50"]});
  }
`,FileInfo=({file,onCloseClick=()=>{},dimension,fileDimension,children,...props})=>{const{file:{type,name,size},status,error,showPreview}=file,PreviewIcon=(type=>{switch(type){case"image/jpeg":case"image/png":case"image/tiff":return SvgJpgSolid;case"application/pdf":return SvgFilePdfSolid;case"application/vnd.ms-powerpoint":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return SvgFilePptSolid;case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return SvgFileXlsSolid;case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return SvgFileWordSolid;default:return SvgDocsSolid}})(type),fileFormat=(type=>{switch(type){case"image/jpeg":return"JPEG";case"image/png":return"PNG";case"image/tiff":return"TIFF";case"application/pdf":return"PDF";case"application/vnd.ms-powerpoint":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return"PPT";case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"XLS";case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"Word";default:return"Docs"}})(type),fileSize=formatBytes(size),fileName=name.substring(0,name.lastIndexOf(".")),[imageSrc,setImageSrc]=e.useState(""),imageFile=showPreview&&type.startsWith("image"),fileInfo=`${fileFormat}ãƒ»${fileSize} Mb`,titleRef=e.useRef(null),[tooltipVisible,setTooltipVisible]=e.useState(!1),[titleOverflow,setTitleOverflow]=e.useState(!1);return useEffect(()=>{const element=titleRef.current;element&&checkOverflow(element)!==titleOverflow&&setTitleOverflow(checkOverflow(element))},[tooltipVisible,setTitleOverflow]),useEffect(()=>{function show(){setTooltipVisible(!0)}function hide(){setTooltipVisible(!1)}const title=titleRef.current;if(title)return title.addEventListener("mouseenter",show),title.addEventListener("mouseleave",hide),()=>{title.removeEventListener("mouseenter",show),title.removeEventListener("mouseleave",hide)}},[setTooltipVisible]),useEffect(()=>{file&&imageFile&&!children&&(file=>{const reader=new FileReader;reader.onloadend=function(){"string"==typeof reader.result&&setImageSrc(reader.result)},file?reader.readAsDataURL(file.file):setImageSrc("")})(file)},[file]),jsxs(Container,{$dimension:dimension,children:[jsxs(PreviewWrapper,{...props,$dimension:dimension,$fileDimension:fileDimension,$status:status,children:[children||jsxs(InfoBlock,{$dimension:dimension,children:["xl"===fileDimension&&(imageFile?jsx(ImagePreview,{children:jsx("img",{src:imageSrc,alt:""})}):jsx(IconWrapper,{$status:status,children:jsx(PreviewIcon,{})})),jsxs(Content,{$fileDimension:fileDimension,children:[jsx(Title,{ref:titleRef,children:fileName}),tooltipVisible&&titleOverflow&&jsx(Tooltip,{targetElement:titleRef.current,renderContent:()=>`${fileName}`}),jsx(Size,{$fileDimension:fileDimension,$status:status,children:fileInfo})]})]}),jsxs(FunctionalWrapper,{children:["Loading"===status&&jsx(StyledSpinner,{}),dataTransferConstructorSupported()&&jsx(Close,{onClick:onCloseClick,children:jsx(SvgCloseOutline,{})})]})]}),error&&"Error"===status&&jsx(ErrorBlock,{$status:status,children:error})]})};export{FileInfo};
//# sourceMappingURL=FileInfo.es.js.map
