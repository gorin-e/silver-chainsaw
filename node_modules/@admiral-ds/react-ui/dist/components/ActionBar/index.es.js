import{jsxs,jsx}from"react/jsx-runtime";import{useState,useRef,useLayoutEffect,useMemo,Fragment}from"react";import styled from"styled-components";import{ACTION_BAR_ITEM_HEIGHT_XL,ACTION_BAR_ITEM_HEIGHT_L,ACTION_BAR_ITEM_HEIGHT_M,ACTION_BAR_ITEM_HEIGHT_S,FOCUS_ACTION_BAR_OVERFLOW_MENU_BORDER_OFFSET_XL,FOCUS_ACTION_BAR_OVERFLOW_MENU_BORDER_OFFSET_L,FOCUS_ACTION_BAR_OVERFLOW_MENU_BORDER_OFFSET_M,FOCUS_ACTION_BAR_OVERFLOW_MENU_BORDER_OFFSET_S,DIVIDER_SIZE_S,DIVIDER_SIZE_M}from"./constants.es.js";import{OverflowMenu}from"../OverflowMenu/index.es.js";import{ActionBarDivider}from"./ActionBarItems.es.js";export{ActionBarDropMenuItem,ActionBarDropMenuItemWrapper,ActionBarItem,ActionBarItemWithTooltip}from"./ActionBarItems.es.js";import"../themes/common/locales.es.js";import"../Typography/typography.es.js";import"../Typography/defaultTypographyMixin.es.js";import{mediumGroupBorderRadius}from"../themes/borderRadius.es.js";const getActionBarHeight=dimension=>{switch(dimension){case"s":return ACTION_BAR_ITEM_HEIGHT_S;case"m":return ACTION_BAR_ITEM_HEIGHT_M;case"l":return ACTION_BAR_ITEM_HEIGHT_L;default:return ACTION_BAR_ITEM_HEIGHT_XL}},Wrapper=styled.div`
  box-sizing: border-box;
  height: ${({$dimension})=>getActionBarHeight($dimension)}px;

  display: flex;
  align-items: center;
`,ActionBarOverflowMenuItem=styled.div`
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: ${({$dimension})=>getActionBarHeight($dimension)}px;
  height: ${({$dimension})=>getActionBarHeight($dimension)}px;
`,getFocusBorderOffset=$dimension=>{switch($dimension){case"s":return FOCUS_ACTION_BAR_OVERFLOW_MENU_BORDER_OFFSET_S;case"m":return FOCUS_ACTION_BAR_OVERFLOW_MENU_BORDER_OFFSET_M;case"l":return FOCUS_ACTION_BAR_OVERFLOW_MENU_BORDER_OFFSET_L;default:return FOCUS_ACTION_BAR_OVERFLOW_MENU_BORDER_OFFSET_XL}};const StyledOverflowMenu=styled(OverflowMenu)`
  &:focus-visible:not(:disabled) {
    outline: none;

    &:before {
      border: 2px solid var(--admiral-color-Primary_Primary60Main, ${p=>p.theme.color["Primary/Primary 60 Main"]});
      border-radius: ${p=>function(componentBorderRadius){switch(componentBorderRadius){case"0":return"0";case"2px":return"6px";case"6px":return"10px";case"8px":return"12px";case"10px":return"14px";default:return"8px"}}(mediumGroupBorderRadius(p.theme.shape))};
      content: '';
      display: block;
      position: absolute;
      width: ${({$dimension})=>getActionBarHeight($dimension)+4}px;
      height: ${({$dimension})=>getActionBarHeight($dimension)+4}px;
      top: -${p=>getFocusBorderOffset(p.$dimension)}px;
      left: -${p=>getFocusBorderOffset(p.$dimension)}px;
      right: -${p=>getFocusBorderOffset(p.$dimension)}px;
      bottom: -${p=>getFocusBorderOffset(p.$dimension)}px;
      pointer-events: none;
    }
  }
`,ActionBar=({dimension="xl",renderActionBarItem,renderDropMenuItem,items,itemIsDisabled,...props})=>{const[containerWidth,setContainerWidth]=useState(0),containerRef=useRef(null);useLayoutEffect(()=>{if(containerRef.current){const resizeObserver=new ResizeObserver(entries=>{entries.forEach(entry=>setContainerWidth(entry.contentRect.width||0))});return resizeObserver.observe(containerRef.current),()=>{resizeObserver.disconnect()}}},[]);const[visibleItems,setVisibleItems]=useState([]),[hiddenItems,setHiddenItems]=useState([]);useLayoutEffect(()=>{if(containerRef.current){const buttonWidth=getActionBarHeight(dimension),dividerWidth="s"===dimension?DIVIDER_SIZE_S:DIVIDER_SIZE_M,totalItemsWidth=items.reduce((acc,item)=>acc+buttonWidth+(item.withDivider?dividerWidth:0),0);let availableWidth=containerWidth-(totalItemsWidth>containerWidth?buttonWidth:0);const newVisibleItems=[],newHiddenItems=[],addToVisible=item=>newVisibleItems.push(item),addToHidden=item=>newHiddenItems.push(item);items.forEach(item=>{const itemWidth=buttonWidth+(item.withDivider?dividerWidth:0);availableWidth>=itemWidth?(addToVisible(item),availableWidth-=itemWidth):(addToHidden(item),availableWidth=0)}),setVisibleItems(newVisibleItems),setHiddenItems(newHiddenItems)}},[items,containerWidth,dimension]);const overflowMenuItems=useMemo(()=>0===hiddenItems.length?[]:hiddenItems.map(({itemId})=>({id:itemId,render:renderDropMenuItem(itemId),disabled:itemIsDisabled(itemId)})),[hiddenItems,dimension]);return jsxs(Wrapper,{...props,ref:containerRef,$dimension:dimension,children:[visibleItems.map(item=>(({itemId,withDivider})=>jsxs(Fragment,{children:[renderActionBarItem(itemId),withDivider&&jsx(ActionBarDivider,{dimension},`divider${itemId}`)]},itemId))(item)),hiddenItems.length>0&&jsx(ActionBarOverflowMenuItem,{$dimension:dimension,children:jsx(StyledOverflowMenu,{$dimension:dimension,items:overflowMenuItems,dimension:"xl"===dimension?"l":dimension})})]})};export{ActionBar,ActionBarDivider};
//# sourceMappingURL=index.es.js.map
