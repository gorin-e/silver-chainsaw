import{jsx,Fragment}from"react/jsx-runtime";import{useState,useRef,useEffect,cloneElement,Children}from"react";const Transition=({children,in:_in=!1,timeout=300,onEnter,onEntering,onEntered,onExit,onExiting,onExited,...childProps})=>{const[status,setStatus]=useState(_in?"entered":"exited"),statusRef=useRef(_in?"entered":"exited"),timer=useRef(0);useEffect(()=>()=>{cancelCallback()},[]),useEffect(()=>{let nextStatus=null;_in?"entering"!==statusRef.current&&"entered"!==statusRef.current&&(nextStatus="entering"):"entering"!==statusRef.current&&"entered"!==statusRef.current||(nextStatus="exiting"),updateStatus(nextStatus)},[_in]),useEffect(()=>{if(statusRef.current!==status){statusRef.current=status;const{enter:enterTimeout,exit:exitTimeout}=getTimeouts();"entering"==status?(onEntering?.(),onTransitionEnd(enterTimeout,()=>{setStatus("entered")})):"exiting"==status?(onExiting?.(),onTransitionEnd(exitTimeout,()=>{setStatus("exited")})):"entered"==status?onEntered?.():"exited"==status&&onExited?.()}},[status]);const getTimeouts=()=>{let exit,enter;return"number"==typeof timeout?exit=enter=timeout:(exit=timeout.exit,enter=timeout.enter),{exit,enter}},updateStatus=nextStatus=>{null!==nextStatus&&(cancelCallback(),"entering"===nextStatus?performEnter():performExit())},performEnter=()=>{onEnter?.(),setStatus("entering")},performExit=()=>{onExit?.(),setStatus("exiting")},cancelCallback=()=>{clearTimeout(timer.current)},onTransitionEnd=(timeout,handler)=>{timer.current=setTimeout(handler,timeout)};return jsx(Fragment,{children:"function"==typeof children?children(status,childProps):cloneElement(Children.only(children),childProps)})};export{Transition};
//# sourceMappingURL=Transition.es.js.map
