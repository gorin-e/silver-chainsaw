import{jsx}from"react/jsx-runtime";import{useRef,useEffect}from"react";import styled,{css}from"styled-components";const getActionSize=dimension=>{switch(dimension){case"s":return 32;case"l":return 48;case"xl":return 56;default:return 40}},OverflowMenuWrapper=styled.div`
  position: sticky;
  right: 0;
  z-index: 5;

  .table[data-shadow-right='true'] & {
    box-shadow: -4px 0 12px rgba(0, 0, 0, 0.12);
  }

  ${({$showRowsActions})=>!$showRowsActions&&css`
      width: 0;
      direction: rtl;
      visibility: hidden;
      &:hover {
        visibility: visible;
      }
    `}
`,OverflowMenuContent=styled.div`
  display: flex;
  align-items: flex-start;
  justify-content: center;
  box-sizing: border-box;
  height: 100%;
  width: ${({$dimension})=>getActionSize($dimension)}px;
  padding: ${({$dimension})=>{switch($dimension){case"s":return"0px";case"l":return"6px 0 5px";case"xl":return"10px 0 9px";default:return"4px 0 3px"}}};
  background-color: inherit;
`,OverflowMenu=({row,dimension,showRowsActions,tableRef,headerHeight,...props})=>{const oveflowMenuRef=useRef(null);return useEffect(()=>{const observer=new IntersectionObserver(function([entry]){if(!entry.isIntersecting){const overflowMenuBtn=oveflowMenuRef.current?.querySelector("button[aria-haspopup='true'][aria-expanded='true']");overflowMenuBtn?.click()}},{root:tableRef.current,rootMargin:`-${headerHeight||0}px 0px 0px 0px`,threshold:[0,1]});return tableRef.current&&oveflowMenuRef.current&&observer.observe(oveflowMenuRef.current),()=>observer.disconnect()},[headerHeight]),jsx(OverflowMenuWrapper,{ref:oveflowMenuRef,"data-overflowmenu":!0,"data-opened":showRowsActions,$showRowsActions:showRowsActions,...props,children:jsx(OverflowMenuContent,{$dimension:dimension,children:row.actionRender?row.actionRender(row):row.overflowMenuRender?.(row,isVisible=>{showRowsActions||(isVisible?oveflowMenuRef.current&&(oveflowMenuRef.current.dataset.opened="true"):oveflowMenuRef.current&&(oveflowMenuRef.current.dataset.opened="false"))})})})};export{OverflowMenu,getActionSize};
//# sourceMappingURL=OverflowMenu.es.js.map
