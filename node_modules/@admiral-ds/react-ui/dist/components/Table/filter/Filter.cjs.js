"use strict";var jsxRuntime=require("react/jsx-runtime"),e=require("react"),styled=require("styled-components"),keyboardKey=require("../../common/keyboardKey.cjs.js"),refSetter=require("../../common/utils/refSetter.cjs.js"),index=require("../../DropdownContainer/index.cjs.js"),Button=require("./Button.cjs.js");function _interopDefault(e){return e&&e.__esModule?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(k){if("default"!==k){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:!0,get:function(){return e[k]}})}}),n.default=e,Object.freeze(n)}var e__namespace=_interopNamespace(e);const FilterDropdownContainer=_interopDefault(styled).default(index.StyledDropdownContainer)`
  background-color: var(--admiral-color-Special_ElevatedBG, ${p=>p.theme.color["Special/Elevated BG"]});
`,Filter=e__namespace.forwardRef(({column,targetElement,...props},ref)=>{const{renderFilter,renderFilterIcon,onFilterMenuClickOutside,onFilterMenuOpen,onFilterMenuClose,isFilterActive:filterActive,filterMenuAlignSelf="auto",filterMenuCssMixin,filterMenuClassName,filterMenuStyle}=column,[menuOpened,setMenuOpened]=e__namespace.useState(!1),[isFilterActive,setFilterActive]=e__namespace.useState(!1),btnRef=e__namespace.useRef(null),closeMenu=()=>{setMenuOpened(!1),onFilterMenuClose?.(),btnRef.current?.focus()};return jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[jsxRuntime.jsx(Button.Button,{ref:refSetter.refSetter(ref,btnRef),onKeyDown:e=>{const code=keyboardKey.keyboardKey.getCode(e);code!==keyboardKey.keyboardKey.ArrowDown&&code!==keyboardKey.keyboardKey.Enter&&code!==keyboardKey.keyboardKey[" "]||(setMenuOpened(!0),onFilterMenuOpen?.(),e.preventDefault())},onClick:()=>{setMenuOpened(prevOpened=>(prevOpened?onFilterMenuClose?.():onFilterMenuOpen?.(),!prevOpened))},"aria-expanded":menuOpened,"aria-haspopup":menuOpened,isFilterActive:filterActive??isFilterActive,renderFilterIcon,...props}),menuOpened&&jsxRuntime.jsx(FilterDropdownContainer,{role:"listbox",targetElement,alignSelf:filterMenuAlignSelf,onClickOutside:e=>{e.target&&btnRef.current?.contains(e.target)||onFilterMenuClickOutside?.({closeMenu,setFilterActive},e)},onKeyDown:e=>{const code=keyboardKey.keyboardKey.getCode(e);code!==keyboardKey.keyboardKey.Escape&&code!==keyboardKey.keyboardKey.Tab||closeMenu()},dropContainerCssMixin:filterMenuCssMixin,className:filterMenuClassName,style:filterMenuStyle,children:renderFilter?.({closeMenu,setFilterActive},column)})]})});exports.Filter=Filter;
//# sourceMappingURL=Filter.cjs.js.map
