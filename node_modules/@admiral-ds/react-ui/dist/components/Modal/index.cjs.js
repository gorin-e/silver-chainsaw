"use strict";var jsxRuntime=require("react/jsx-runtime"),reactDom=require("react-dom"),styled=require("styled-components"),e=require("react"),getKeyboardFocusableElements=require("../common/utils/getKeyboardFocusableElements.cjs.js"),refSetter=require("../common/utils/refSetter.cjs.js"),parseShadowFromTheme=require("../common/utils/parseShadowFromTheme.cjs.js"),typography=require("../Typography/typography.cjs.js");require("../Typography/defaultTypographyMixin.cjs.js");var index$1=require("../themes/light/index.cjs.js");require("../themes/common/locales.cjs.js");var borderRadius=require("../themes/borderRadius.cjs.js"),manager=require("./manager.cjs.js"),index=require("../IconPlacement/index.cjs.js"),InfoOutline=require("../../node_modules/@admiral-ds/icons/build/service/InfoOutline.svg.cjs.js"),CheckOutline=require("../../node_modules/@admiral-ds/icons/build/service/CheckOutline.svg.cjs.js"),CloseCircleOutline=require("../../node_modules/@admiral-ds/icons/build/service/CloseCircleOutline.svg.cjs.js"),ErrorOutline=require("../../node_modules/@admiral-ds/icons/build/service/ErrorOutline.svg.cjs.js"),index$2=require("../Scrollbar/index.cjs.js");function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var styled__default=_interopDefault(styled);const Overlay=styled__default.default.div`
  display: flex;
  align-items: center;
  justify-content: center;
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  background-color: var(--admiral-color-Opacity_Modal, ${p=>p.theme.color["Opacity/Modal"]});
  transition: opacity 0.3s ease 0s;
  z-index: var(--admiral-z-index-modal, ${({theme})=>theme.zIndex.modal});
  ${p=>p.$overlayStyledCss}
  outline: none;
`,width=styled.css`
  width: ${({$dimension,$mobile})=>{if($mobile)return"calc(100% - 32px)";switch($dimension){case"s":return"384px";case"m":return"488px";case"xl":return"800px";default:return"592px"}}};
`,Title=styled__default.default.h5`
  ${({$mobile})=>$mobile?typography.typography["Header/H6"]:typography.typography["Header/H5"]};
  color: var(--admiral-color-Neutral_Neutral90, ${p=>p.theme.color["Neutral/Neutral 90"]});
  margin: 0;
  padding: ${({$mobile,$displayCloseIcon})=>$mobile?$displayCloseIcon?"0 46px 8px 16px":"0 16px 8px":$displayCloseIcon?"0 56px 8px 24px":"0 24px 8px"};
`,ButtonPanel=styled__default.default.div`
  display: flex;
  flex-direction: ${({$mobile})=>$mobile?"column-reverse":"row-reverse"};
  padding: ${({$mobile})=>$mobile?"16px 16px 0":"16px 24px 0"};

  & > button {
    margin: ${({$mobile})=>$mobile?"0 0 16px 0":"0 16px 0 0"};
    ${({$mobile})=>$mobile&&"width: 100%;"}
  }

  & > button:first-child {
    margin: 0;
  }
`;function getModalIcon(status){switch(status){case"success":return jsxRuntime.jsx(CheckOutline.ReactComponent,{});case"warning":return jsxRuntime.jsx(ErrorOutline.ReactComponent,{});case"danger":return jsxRuntime.jsx(CloseCircleOutline.ReactComponent,{});default:return jsxRuntime.jsx(InfoOutline.ReactComponent,{})}}const modalIconColor=styled.css`
  fill: ${({$status,theme})=>{switch($status){case"success":return`var(--admiral-color-Success_Success50Main, ${theme.color["Success/Success 50 Main"]})`;case"warning":return`var(--admiral-color-Warning_Warning50Main, ${theme.color["Warning/Warning 50 Main"]})`;case"danger":return`var(--admiral-color-Error_Error60Main, ${theme.color["Error/Error 60 Main"]})`;default:return`var(--admiral-color-Primary_Primary60Main, ${theme.color["Primary/Primary 60 Main"]})`}}};
`,ModalStatusIconWrapper=styled__default.default.div`
  margin-left: ${({$mobile})=>$mobile?16:24}px;
  margin-bottom: ${({$mobile})=>$mobile?6:8}px;
  width: 40px;
  height: 40px;

  & *[fill^='#'] {
    ${modalIconColor}
  }
`,ModalComponent=styled__default.default.div`
  position: absolute;
  box-sizing: border-box;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  padding: 20px 0 24px;
  ${width};
  max-height: ${({$mobile})=>$mobile?"84vh":"90vh"};
  background-color: var(--admiral-color-Special_ElevatedBG, ${p=>p.theme.color["Special/Elevated BG"]});
  box-shadow: var(--admiral-box-shadow-Shadow16, ${p=>parseShadowFromTheme.parseShadow(p.theme.shadow["Shadow 16"])});
  border-radius: var(--admiral-border-radius-Large, ${p=>borderRadius.largeGroupBorderRadius(p.theme.shape)});
  ${({$mobile})=>$mobile?typography.typography["Body/Body 2 Long"]:typography.typography["Body/Body 1 Long"]}
  color: var(--admiral-color-Neutral_Neutral90, ${p=>p.theme.color["Neutral/Neutral 90"]});
  outline: none;
`,CloseButton=styled__default.default(index.CloseIconPlacementButton)`
  position: absolute;
  top: 16px;
  right: ${({$mobile})=>$mobile?12:20}px;
`,emptyOverlayStyledCss=styled.css``,ModalContext=e.createContext({mobile:!1,displayCloseIcon:!0}),nothing=()=>{},Modal=e.forwardRef(({overlayStyledCss=emptyOverlayStyledCss,overlayClassName,overlayStyle,dimension="l",container,mobile=!1,onClose,closeOnEscapeKeyDown,closeOnOutsideClick,displayCloseIcon=!0,children,locale,closeButtonPropsConfig=nothing,...props},ref)=>{const theme=styled.useTheme()||index$1.LIGHT_THEME,closeBtnAriaLabel=locale?.closeButtonAriaLabel||theme.locales[theme.currentLocale].modal.closeButtonAriaLabel,modalRef=e.useRef(null),overlayRef=e.useRef(null),previousFocusedElement=e.useRef(null);e.useEffect(()=>{if(modalRef.current){previousFocusedElement.current=document.activeElement,modalRef.current.focus();const modal={containerEl:container||document.body,modalEl:modalRef.current};return manager.manager.add(modal,container||document.body),manager.manager.mount(modal),()=>{previousFocusedElement.current.focus(),manager.manager.remove(modal)}}},[container]);const closeButtonProps={dimension:"lSmall","aria-label":closeBtnAriaLabel,$mobile:mobile,onClick:event=>{event.stopPropagation(),onClose?.()}};return reactDom.createPortal(jsxRuntime.jsx(Overlay,{ref:overlayRef,tabIndex:-1,onMouseDown:event=>{closeOnOutsideClick&&event.target===overlayRef.current&&onClose?.()},onKeyDown:event=>{if("Escape"===event.key&&closeOnEscapeKeyDown)event.preventDefault(),event.stopPropagation(),onClose?.();else if("Tab"===event.key){const focusableEls=getKeyboardFocusableElements.getKeyboardFocusableElements(modalRef.current);event.shiftKey?document.activeElement!==focusableEls[0]&&document.activeElement!==modalRef.current||(focusableEls[focusableEls.length-1].focus(),event.preventDefault()):document.activeElement===focusableEls[focusableEls.length-1]&&(focusableEls[0].focus(),event.preventDefault())}},$overlayStyledCss:overlayStyledCss,className:overlayClassName,style:overlayStyle,children:jsxRuntime.jsxs(ModalComponent,{ref:refSetter.refSetter(ref,modalRef),tabIndex:-1,role:"dialog","aria-modal":!0,$dimension:dimension,$mobile:mobile,...props,children:[jsxRuntime.jsx(ModalContext.Provider,{value:{mobile,displayCloseIcon},children}),displayCloseIcon&&jsxRuntime.jsx(CloseButton,{...closeButtonProps,...closeButtonPropsConfig(closeButtonProps)})]})}),container||document.body)});Modal.displayName="Modal";exports.Modal=Modal,exports.ModalButtonPanel=({children,...props})=>{const mobile=e.useContext(ModalContext).mobile;return jsxRuntime.jsx(ButtonPanel,{$mobile:mobile,...props,children})},exports.ModalContent=({children,contentBlockProps={},...props})=>{const mobile=e.useContext(ModalContext).mobile;return contentBlockProps.style={...contentBlockProps.style,paddingBlock:"8px",paddingInline:mobile?"16px":"24px"},jsxRuntime.jsx(index$2.ScrollContainer,{tabIndex:-1,contentBlockProps,...props,children})},exports.ModalStatusIcon=({status})=>{const mobile=e.useContext(ModalContext).mobile;return jsxRuntime.jsx(ModalStatusIconWrapper,{$status:status,$mobile:mobile,children:getModalIcon(status)})},exports.ModalTitle=({children,...props})=>{const{mobile,displayCloseIcon}=e.useContext(ModalContext),asProp=mobile?"h6":"h5";return jsxRuntime.jsx(Title,{$mobile:mobile,$displayCloseIcon:displayCloseIcon,as:asProp,...props,children})},exports.emptyOverlayStyledCss=emptyOverlayStyledCss;
//# sourceMappingURL=index.cjs.js.map
