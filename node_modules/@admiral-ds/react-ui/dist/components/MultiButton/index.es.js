import{jsx,jsxs}from"react/jsx-runtime";import*as e from"react";import styled,{css}from"styled-components";import{Button}from"../Button/index.es.js";import{mediumGroupBorderRadius}from"../themes/borderRadius.es.js";import{DropMenu}from"../DropMenu/index.es.js";import{skeletonAnimationMixin}from"../skeleton/animation.es.js";import{passDropdownDataAttributes}from"../common/utils/splitDataAttributes.es.js";const mainButtonBorderRadius=css`
  ${({theme})=>{const radius=mediumGroupBorderRadius(theme.shape);return`var(--admiral-border-radius-Medium, ${radius}) 0 0 var(--admiral-border-radius-Medium, ${radius})`}}
`,menuButtonBorderRadius=css`
  ${({theme})=>{const radius=mediumGroupBorderRadius(theme.shape);return`0 var(--admiral-border-radius-Medium, ${radius}) var(--admiral-border-radius-Medium, ${radius}) 0`}}
`,focusStyle=css`
  &:focus-visible {
    outline-offset: -4px;
    &[data-appearance~='primary'] {
      outline: var(--admiral-color-Neutral_Neutral00, ${p=>p.theme.color["Neutral/Neutral 00"]}) solid 2px;
    }
    &[data-appearance~='secondary'] {
      outline: var(--admiral-color-Primary_Primary60Main, ${p=>p.theme.color["Primary/Primary 60 Main"]}) solid 2px;
    }
  }
`,MainButton=styled(Button)`
  &[data-appearance~='primary'] {
    border-radius: ${p=>p.skeleton?0:mainButtonBorderRadius};
  }
  &[data-appearance~='tertiary'] {
    border-radius: ${p=>p.skeleton?0:mainButtonBorderRadius};
  }
  // повышаем специфичность, чтобы перебить изначальные стили border у Button
  &&&[data-appearance~='secondary'] {
    border-right: none;
    border-radius: ${p=>p.skeleton?0:mainButtonBorderRadius};
  }
  ${focusStyle}
`,MenuButton=styled(Button)`
  &[data-appearance~='primary'] {
    border-radius: ${p=>p.skeleton?0:menuButtonBorderRadius};
  }
  &[data-appearance~='tertiary'] {
    border-radius: ${p=>p.skeleton?0:menuButtonBorderRadius};
  }
  // повышаем специфичность, чтобы перебить изначальные стили border у Button
  &&&[data-appearance~='secondary'] {
    border-left: none;
    border-radius: ${p=>p.skeleton?0:menuButtonBorderRadius};
  }
  ${focusStyle}
`,Separator=styled.div`
  width: 1px;
  &[data-appearance~='primary'] {
    background-color: transparent;
  }
  &[data-appearance~='tertiary'] {
    background-color: transparent;
  }

  &[data-appearance~='secondary'] {
    background-color: ${({theme,disabled})=>disabled?`var(--admiral-color-Neutral_Neutral30, ${theme.color["Neutral/Neutral 30"]})`:`var(--admiral-color-Primary_Primary60Main, ${theme.color["Primary/Primary 60 Main"]})`};
  }

  ${({$skeleton})=>$skeleton&&skeletonAnimationMixin};
`,Wrapper=styled.div`
  display: inline-flex;
`,MultiButton=e.forwardRef(({dimension="l",appearance="primary",disabled,disabledMainButton,items=[],onMainButtonClick,disableSelectedOptionHighlight,selected,onSelectItem,active,onActivateItem,isVisible,onVisibilityChange,onClickOutside,onChange,onClose,onOpen,skeleton=!1,alignSelf="auto",menuMaxHeight,dropContainerCssMixin,dropContainerClassName,dropContainerStyle,renderTopPanel,renderBottomPanel,onForwardCycleApprove,onBackwardCycleApprove,children,...props},ref)=>{const wrapperRef=e.useRef(null),menuDimension="xl"===dimension?"l":dimension,menuWidth="s"===dimension?"240px":"280px",handleWrapperFocus=()=>{wrapperRef.current?.setAttribute("data-focused","true")},handleWrapperBlur=()=>{wrapperRef.current?.setAttribute("data-focused","false")},dropMenuProps={...passDropdownDataAttributes(props),renderTopPanel,renderBottomPanel,items,onChange,onOpen,onClose,isVisible,onVisibilityChange,onClickOutside,disableSelectedOptionHighlight,selected,onSelectItem,active,onActivateItem,menuMaxHeight,menuWidth,dropContainerCssMixin,dropContainerClassName,dropContainerStyle,alignSelf,onForwardCycleApprove,onBackwardCycleApprove};return jsx(DropMenu,{...dropMenuProps,dimension:menuDimension,disabled,renderContentProp:({buttonRef,handleKeyDown,handleClick,statusIcon,menuState})=>jsxs(Wrapper,{ref:wrapperRef,"data-focused":"false",onFocus:handleWrapperFocus,onBlur:handleWrapperBlur,...props,children:[jsx(MainButton,{ref,skeleton,dimension,appearance,disabled:disabled||disabledMainButton,onClick:onMainButtonClick,children:e.Children.toArray(children).map((child,index)=>"string"==typeof child?jsx("span",{children:child},`${child}-${index}`):child)}),jsx(Separator,{disabled,$skeleton:skeleton,"data-appearance":appearance,"aria-hidden":!0}),jsx(MenuButton,{ref:buttonRef,skeleton,dimension,appearance,disabled,displayAsSquare:!0,onKeyDown:handleKeyDown,onClick:handleClick,"aria-expanded":menuState,className:"multi-button-menu-button-with-dropdown",children:statusIcon})]})})});MultiButton.displayName="MultiButton";export{MultiButton};
//# sourceMappingURL=index.es.js.map
