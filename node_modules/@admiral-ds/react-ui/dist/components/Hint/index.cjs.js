"use strict";var jsxRuntime=require("react/jsx-runtime"),e=require("react"),handleRef=require("../common/utils/handleRef.cjs.js"),getScrollableParents=require("../common/utils/getScrollableParents.cjs.js"),uid=require("../common/uid.cjs.js"),keyboardKey=require("../common/keyboardKey.cjs.js"),style=require("./style.cjs.js"),utils=require("./utils.cjs.js"),HintContainer=require("./HintContainer.cjs.js"),DropdownProvider=require("../DropdownProvider.cjs.js");function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(k){if("default"!==k){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:!0,get:function(){return e[k]}})}}),n.default=e,Object.freeze(n)}var e__namespace=_interopNamespace(e);const Hint=({visible,onVisibilityChange,renderContent,hintPosition,targetElement:userTargetElement,visibilityTrigger="hover",dimension="l",hintRef,children,anchorClassName,anchorId:anchorIdProp,anchorCssMixin,locale,preventFocusSteal,...props})=>{const{rootRef}=e__namespace.useContext(DropdownProvider.DropdownContext),anchorElementRef=e__namespace.useRef(null),hintElementRef=e__namespace.useRef(null),content=renderContent(),anchorId=anchorIdProp||uid.uid(),targetElement=userTargetElement||anchorElementRef.current,[recalculation,startRecalculation]=e__namespace.useState(null),[portalFlexDirection,setPortalFlexDirection]=e__namespace.useState(""),[portalFullWidth,setPortalFullWidth]=e__namespace.useState(!1),[isMobile,setMobile]=e__namespace.useState(window.innerWidth<640),showHint=()=>onVisibilityChange?.(!0),hideHint=()=>onVisibilityChange?.(!1);e__namespace.useLayoutEffect(()=>{const listener=()=>{window.innerWidth<640?setMobile(!0):setMobile(!1)};return addEventListener("resize",listener),()=>{removeEventListener("resize",listener)}}),e__namespace.useLayoutEffect(()=>{const hint=hintElementRef.current;if(visible&&targetElement&&hint){const anchorElementRect=targetElement.getBoundingClientRect(),hintElementRect=hint.getBoundingClientRect();if(isMobile)window.innerHeight-anchorElementRect.bottom>hintElementRect.height?setPortalFlexDirection("column"):setPortalFlexDirection("column-reverse"),setPortalFullWidth(!0),hint.style.alignSelf="center",hint.style.margin="0";else{switch(utils.getHintDirection(targetElement,hint,hintPosition)){case"topPageCenter":setPortalFlexDirection("column-reverse"),setPortalFullWidth(!0),hint.style.alignSelf="center",hint.style.margin="0";break;case"bottomPageCenter":setPortalFlexDirection("column"),setPortalFullWidth(!0),hint.style.alignSelf="center",hint.style.margin="0";break;case"right":setPortalFlexDirection("row"),setPortalFullWidth(!1),hint.style.alignSelf="center",hint.style.margin="0";break;case"left":setPortalFlexDirection("row-reverse"),setPortalFullWidth(!1),hint.style.alignSelf="center",hint.style.margin="0";break;case"top":setPortalFlexDirection("column-reverse"),setPortalFullWidth(!1),hint.style.alignSelf="center",hint.style.margin="0";break;case"bottom":setPortalFlexDirection("column"),setPortalFullWidth(!1),hint.style.alignSelf="center",hint.style.margin="0";break;case"rightTop":setPortalFlexDirection("row"),setPortalFullWidth(!1),hint.style.alignSelf="flex-end",hint.style.margin="0 0 -8px 0";break;case"rightBottom":setPortalFlexDirection("row"),setPortalFullWidth(!1),hint.style.alignSelf="flex-start",hint.style.margin="-8px 0 0 0";break;case"leftTop":setPortalFlexDirection("row-reverse"),setPortalFullWidth(!1),hint.style.alignSelf="flex-end",hint.style.margin="0 0 -8px 0";break;case"leftBottom":setPortalFlexDirection("row-reverse"),setPortalFullWidth(!1),hint.style.alignSelf="flex-start",hint.style.margin="-8px 0 0 0";break;case"topLeft":setPortalFlexDirection("column-reverse"),setPortalFullWidth(!1),hint.style.alignSelf="flex-end",hint.style.margin="0 -8px 0 0";break;case"topRight":setPortalFlexDirection("column-reverse"),setPortalFullWidth(!1),hint.style.alignSelf="flex-start",hint.style.margin="0 0 0 -8px";break;case"bottomLeft":setPortalFlexDirection("column"),setPortalFullWidth(!1),hint.style.alignSelf="flex-end",hint.style.margin="0 -8px 0 0";break;default:setPortalFlexDirection("column"),setPortalFullWidth(!1),hint.style.alignSelf="flex-start",hint.style.margin="0 0 0 -8px"}}}},[userTargetElement,hintPosition,visible,recalculation,dimension,content,isMobile]);const scrollableParents=e__namespace.useMemo(()=>getScrollableParents.getScrollableParents(anchorElementRef.current)??[],[anchorElementRef.current]);return e__namespace.useEffect(()=>{visible&&hintElementRef.current&&(hintElementRef.current.style.opacity="1")},[visible]),jsxRuntime.jsxs(style.AnchorWrapper,{onMouseEnter:"click"===visibilityTrigger?void 0:showHint,onMouseLeave:"click"===visibilityTrigger?void 0:hideHint,onFocus:"click"===visibilityTrigger?void 0:showHint,onBlur:"click"===visibilityTrigger?void 0:hideHint,onClick:"click"===visibilityTrigger?showHint:void 0,onKeyDown:"click"===visibilityTrigger?event=>{const code=keyboardKey.keyboardKey.getCode(event);code!==keyboardKey.keyboardKey.Enter&&code!==keyboardKey.keyboardKey[" "]||(event.preventDefault(),showHint())}:void 0,ref:anchorElementRef,className:anchorClassName,id:anchorId,$anchorCssMixin:anchorCssMixin,children:[children,visible&&jsxRuntime.jsxs(style.Portal,{targetElement,rootRef,$flexDirection:portalFlexDirection,fullContainerWidth:portalFullWidth,children:[jsxRuntime.jsx(style.FakeTarget,{}),jsxRuntime.jsx(HintContainer.HintContainer,{ref:node=>handleRef.handleRef(node,hintRef,hintElementRef),dimension,isMobile,content,visibilityTrigger,scrollableParents,startRecalculation,anchorElementRef,anchorId,hideHint,locale,preventFocusSteal,...props})]})]})};Hint.displayName="Hint",exports.Hint=Hint;
//# sourceMappingURL=index.cjs.js.map
