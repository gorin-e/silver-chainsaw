"use strict";var jsxRuntime=require("react/jsx-runtime"),refSetter=require("../common/utils/refSetter.cjs.js"),scrollbarUtil=require("../common/dom/scrollbarUtil.cjs.js"),style=require("./style.cjs.js"),utils=require("./utils.cjs.js"),DropdownProvider=require("../DropdownProvider.cjs.js"),e=require("react");const Tooltip=e.forwardRef(({dimension="m",renderContent,targetElement,tooltipPosition,...props},ref)=>{const tooltipElementRef=e.useRef(null),tooltipHeight=e.useRef(0),{rootRef}=e.useContext(DropdownProvider.DropdownContext),emptyContent=e.useMemo(()=>!renderContent()&&0!==renderContent(),[renderContent]),[portalFlexDirection,setPortalFlexDirection]=e.useState(),[portalFullWidth,setPortalFullWidth]=e.useState(!1),[recalculation,startRecalculation]=e.useState({});return e.useEffect(()=>{(scrollbarSize=>{const target=targetElement;if(target&&tooltipElementRef.current){const direction=utils.getTooltipDirection(target,tooltipElementRef.current,scrollbarSize,tooltipPosition),tooltip=tooltipElementRef.current;switch(direction){case"leftBottom":case"leftTop":case"left":setPortalFlexDirection("row-reverse"),setPortalFullWidth(!1),tooltip.style.margin="0 8px 0 0",tooltip.style.alignSelf="leftBottom"===direction?"flex-start":"leftTop"===direction?"flex-end":"center";break;case"rightBottom":case"rightTop":case"right":setPortalFlexDirection("row"),setPortalFullWidth(!1),tooltip.style.margin="0 0 0 8px",tooltip.style.alignSelf="rightBottom"===direction?"flex-start":"rightTop"===direction?"flex-end":"center";break;case"topPageCenter":case"topLeft":case"topRight":case"top":setPortalFlexDirection("column-reverse"),setPortalFullWidth("topPageCenter"===direction),tooltip.style.margin="0 0 8px 0",tooltip.style.alignSelf="topLeft"===direction?"flex-end":"topRight"===direction?"flex-start":"center";break;default:setPortalFlexDirection("column"),setPortalFullWidth("bottomPageCenter"===direction),tooltip.style.margin="8px 0 0 0",tooltip.style.alignSelf="bottomLeft"===direction?"flex-end":"bottomRight"===direction?"flex-start":"center"}}})(scrollbarUtil.getScrollbarSize())},[renderContent(),targetElement,tooltipPosition,recalculation]),e.useLayoutEffect(()=>{if(tooltipElementRef.current&&!emptyContent){const resizeObserver=new ResizeObserver(entries=>{entries.forEach(entry=>{0===tooltipHeight.current?tooltipHeight.current=entry.contentRect.height:startRecalculation({})})});return resizeObserver.observe(tooltipElementRef.current),()=>{resizeObserver.disconnect()}}},[emptyContent]),e.useEffect(()=>{tooltipElementRef.current&&!emptyContent&&(tooltipElementRef.current.style.opacity="1")},[emptyContent]),emptyContent?null:jsxRuntime.jsxs(style.Portal,{targetElement,rootRef,$flexDirection:portalFlexDirection,fullContainerWidth:portalFullWidth,children:[jsxRuntime.jsx(style.FakeTarget,{}),jsxRuntime.jsx(style.TooltipWrapper,{ref:refSetter.refSetter(ref,tooltipElementRef),children:jsxRuntime.jsx(style.TooltipContainer,{role:"tooltip",$dimension:dimension,...props,children:renderContent()})})]})});Tooltip.displayName="Tooltip",exports.TOOLTIP_DELAY=1500,exports.Tooltip=Tooltip;
//# sourceMappingURL=index.cjs.js.map
