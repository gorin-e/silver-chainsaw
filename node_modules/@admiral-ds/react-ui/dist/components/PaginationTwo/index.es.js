import{jsxs,jsx}from"react/jsx-runtime";import{useState}from"react";import styled,{useTheme}from"styled-components";import{LIGHT_THEME}from"../themes/light/index.es.js";import"../themes/common/locales.es.js";import{typography}from"../Typography/typography.es.js";import"../Typography/defaultTypographyMixin.es.js";import{uid}from"../common/uid.es.js";import{TextInput}from"../input/TextInput/index.es.js";import{Button as Button$1}from"../Button/index.es.js";import{Ellipsis,PaginationItem}from"./Items.es.js";import{getListOfPages,range}from"./utils.es.js";const Wrapper=styled.div`
  position: relative;
  display: flex;
  align-items: center;
  flex-direction: ${({$mobile})=>$mobile?"column":"row"};
  flex: 1 1 auto;
  list-style: none;
  color: var(--admiral-color-Neutral_Neutral90, ${p=>p.theme.color["Neutral/Neutral 90"]});
`,PagesWrapper=styled.ul`
  position: relative;
  display: flex;
  justify-content: center;
  list-style: none;
  padding: 0;
  margin: 0;
`,Input=styled(TextInput)`
  margin-left: 8px;
  & > input {
    max-width: 130px;
  }
`,Button=styled(Button$1)`
  width: 100%;
  margin-bottom: 20px;
`,PageSize=styled.div`
  color: var(--admiral-color-Neutral_Neutral50, ${p=>p.theme.color["Neutral/Neutral 50"]});
  ${p=>"m"===p.$dimension?typography["Body/Body 1 Long"]:typography["Body/Body 2 Long"]}
  margin-left: 16px;
`,PaginationTwo=({dimension="m",page,count=1,siblingCount=1,boundaryCount=1,mobile=!1,disabledPages=[],showNextBtnMobile=!0,showInput=!0,onChange,pageSize,totalItems,locale,...props})=>{const theme=useTheme()||LIGHT_THEME,itemRangeText=locale?.itemRangeText||theme.locales[theme.currentLocale].paginationTwo.itemRangeText,placeholder=locale?.inputPlaceholder||theme.locales[theme.currentLocale].paginationTwo.inputPlaceholder,hideNextButton=mobile||!1,hidePrevButton=mobile||!1,isInputVisible=showInput&&count>21&&!mobile,[inputValue,setInputValue]=useState(""),itemList=getListOfPages(page,count,hidePrevButton,hideNextButton,siblingCount,boundaryCount),getNextPage=()=>range(page+1,count).filter(item=>-1===disabledPages.indexOf(item))[0]||count,disableNextBtn=page>=count||range(page+1,count).every(item=>disabledPages.indexOf(item)>-1),disablePreviousBtn=page<=1||range(1,page-1).every(item=>disabledPages.indexOf(item)>-1),buttonPage=type=>{switch(type){case"previous":return range(1,page-1).filter(item=>-1===disabledPages.indexOf(item)).reverse()[0]||1;case"next":return getNextPage();default:return null}},handlePageClick=(event,value)=>{value&&value!==page&&onChange?.(event,value),event.currentTarget.blur()},items=itemList.map(item=>"number"==typeof item?{onClick:event=>{handlePageClick(event,item)},type:"page",page:item,selected:item===page,disabled:disabledPages.indexOf(item)>-1}:{onClick:event=>{handlePageClick(event,buttonPage(item))},type:item,page:buttonPage(item),selected:!1,disabled:-1===item.indexOf("ellipsis")&&("next"===item?disableNextBtn:disablePreviousBtn)}),onInputSubmit=(event,value)=>{const parsed=parseInt(value,10);if(setInputValue(""),!(isNaN(parsed)||disabledPages.indexOf(parsed)>-1)&&parsed!==page){const newValue=parsed>count?count:parsed<1?1:parsed;onChange?.(event,newValue)}};return jsxs(Wrapper,{$mobile:mobile,...props,children:[mobile&&showNextBtnMobile&&jsx(Button,{dimension,appearance:"secondary",disabled:disableNextBtn,onClick:event=>onChange?.(event,getNextPage()),children:"Дальше"}),jsx(PagesWrapper,{children:items.map(({type,selected,disabled,page,onClick})=>{const id=uid();return jsx("li","ellipsis"===type?{children:jsx(Ellipsis,{dimension})}:{children:jsx(PaginationItem,{dimension,type,selected,disabled,page,onClick})},id)})}),isInputVisible&&jsx(Input,{dimension,pattern:"[0-9]+",placeholder,value:inputValue,onChange:event=>setInputValue(event.currentTarget.value),onKeyDown:event=>{"Enter"===event.key&&(onInputSubmit(event,event.currentTarget.value),event.preventDefault())},onBlur:event=>onInputSubmit(event,event.currentTarget.value)}),void 0!==pageSize&&void 0!==totalItems&&jsx(PageSize,{$dimension:dimension,children:itemRangeText(Math.min(pageSize*(page-1)+1,totalItems),Math.min(page*pageSize,totalItems),totalItems)})]})};PaginationTwo.displayName="PaginationTwo";export{PaginationTwo};
//# sourceMappingURL=index.es.js.map
