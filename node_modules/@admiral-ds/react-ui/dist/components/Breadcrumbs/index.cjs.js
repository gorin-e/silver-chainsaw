"use strict";var jsxRuntime=require("react/jsx-runtime"),e=require("react"),Menu=require("./Menu.cjs.js"),BreadCrumb=require("./BreadCrumb.cjs.js"),style=require("./style.cjs.js");function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(k){if("default"!==k){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:!0,get:function(){return e[k]}})}}),n.default=e,Object.freeze(n)}var e__namespace=_interopNamespace(e);const Breadcrumbs=({items,dimension="l",mobile,lastBreadcrumbActive=!1,dropContainerCssMixin,dropContainerClassName,dropContainerStyle,...props})=>{const iconSize="l"===dimension?20:16,visible=items.slice(1,items.length-1),wrapperRef=e__namespace.useRef(null),overflowRef=e__namespace.useRef(null),hasMounted=e__namespace.useRef(!1),[visibilityMap,setVisibilityMap]=e__namespace.useState({0:!0,[items.length-1]:!0}),[opacity,setOpacity]=e__namespace.useState(mobile?1:0);e__namespace.useEffect(()=>{hasMounted.current||(hasMounted.current=!0)},[]),e__namespace.useLayoutEffect(()=>{const firstCrumb=wrapperRef.current?.firstElementChild;if(firstCrumb&&mobile){const resizeObserver=new ResizeObserver(()=>{wrapperRef.current?.scrollBy({left:wrapperRef.current.scrollWidth,behavior:"smooth"})});return resizeObserver.observe(firstCrumb),()=>{resizeObserver.disconnect()}}},[mobile]),e__namespace.useLayoutEffect(()=>{mobile&&wrapperRef.current&&(hasMounted.current?wrapperRef.current.scrollBy({left:wrapperRef.current.scrollWidth,behavior:"smooth"}):wrapperRef.current?.scrollBy({left:wrapperRef.current.scrollWidth}))},[items,mobile]);const handleIntersection=entries=>{const updatedEntries={};entries.forEach(entry=>{const targetNumber=entry.target.dataset.number;targetNumber&&(updatedEntries[targetNumber]=entry.isIntersecting&&entry.intersectionRatio>.99)}),setVisibilityMap(prev=>({...prev,...updatedEntries})),setOpacity(1)};e__namespace.useLayoutEffect(()=>{const observer=new IntersectionObserver(handleIntersection,{root:wrapperRef.current,threshold:[0,1]});return overflowRef.current&&!mobile&&Array.from(overflowRef.current.children).forEach(item=>{observer.observe(item)}),()=>observer.disconnect()},[mobile,setVisibilityMap,setOpacity,items]);const renderFirstItem=e__namespace.useCallback(()=>{const item=items[0],id=item?.id||item?.text;return items.length>1?jsxRuntime.jsx(BreadCrumb.Breadcrumb,{"data-number":0,dimension,...item},id):null},[items,dimension]),renderLastItem=e__namespace.useCallback(()=>{const item=items[items.length-1],id=item?.id||item?.text;return items.length>0?jsxRuntime.jsx(BreadCrumb.Breadcrumb,{"aria-current":"page","data-number":items.length-1,dimension,active:lastBreadcrumbActive,displaySeparator:!1,...mobile?{}:{style:{order:1}},...item},id):null},[items,mobile,dimension,lastBreadcrumbActive]),renderVisibleItems=()=>visible.map((item,index)=>{const id=item.id||item.text,order={style:{order:items.length-index-1}};return jsxRuntime.jsx(BreadCrumb.Breadcrumb,{"data-number":index+1,tabIndex:visibilityMap[index+1]?0:-1,dimension,...mobile?{}:order,...item},id)});return jsxRuntime.jsx(style.Navigation,{"aria-label":"Breadcrumb",...props,children:jsxRuntime.jsx(style.Wrapper,{ref:wrapperRef,$mobile:mobile,$opacity:opacity,role:"list",children:mobile?jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[renderFirstItem(),renderVisibleItems(),renderLastItem()]}):jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[renderFirstItem(),(()=>{const hiddenItems=items.filter((_,index)=>!visibilityMap[index]);return hiddenItems.length?jsxRuntime.jsxs(style.OverflowItem,{children:[jsxRuntime.jsx(Menu.MenuButton,{options:hiddenItems,dimension:"l"===dimension?"m":"s",dropContainerCssMixin,dropContainerClassName,dropContainerStyle,"aria-label":""}),jsxRuntime.jsx(style.Separator,{width:iconSize,height:iconSize,"aria-hidden":!0})]}):null})(),jsxRuntime.jsx(style.OverflowContentWrapper,{$dimension:dimension,"data-overflow":!0,children:jsxRuntime.jsxs(style.OverflowContent,{ref:overflowRef,children:[renderVisibleItems(),renderLastItem(),jsxRuntime.jsx(style.Compensator,{"aria-hidden":!0})]})})]})})})};Breadcrumbs.displayName="Breadcrumbs",exports.Breadcrumbs=Breadcrumbs;
//# sourceMappingURL=index.cjs.js.map
