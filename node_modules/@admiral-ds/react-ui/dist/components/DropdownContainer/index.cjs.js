"use strict";var jsxRuntime=require("react/jsx-runtime"),e=require("react"),styled=require("styled-components"),parseShadowFromTheme=require("../common/utils/parseShadowFromTheme.cjs.js"),PositionInPortal=require("../PositionInPortal.cjs.js"),useInterval=require("../common/hooks/useInterval.cjs.js"),refSetter=require("../common/utils/refSetter.cjs.js"),DropdownProvider=require("../DropdownProvider.cjs.js"),borderRadius=require("../themes/borderRadius.cjs.js"),utils=require("./utils.cjs.js");function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var styled__default=_interopDefault(styled);const Container=styled__default.default.div`
  pointer-events: initial;
  margin: 8px 0;
  flex: 0 0 auto;
  ${p=>p.$alignSelf?`align-self: ${p.$alignSelf};`:""};
  max-width: calc(100vw - 32px);
  opacity: 0;
  transition-delay: 200ms;
  transition-property: opacity;

  &:focus-visible {
    border: 2px solid blue;
  }

  ${p=>p.$dropContainerCssMixin}
`,FakeTarget=styled__default.default.div`
  pointer-events: none;
  height: 100%;
  flex: 0 0 auto;
`,Portal=styled__default.default(PositionInPortal.PositionInPortal)`
  display: flex;
  flex-direction: ${p=>p.$reverse?"column-reverse":"column"};
  flex-wrap: nowrap;
`,doNothing=()=>null,DropdownContainer=e.forwardRef(({targetElement,onClickOutside=doNothing,className="",alignSelf,dropContainerCssMixin,...props},ref)=>{const containerRef=e.useRef(null),[displayUpward,setDisplayUpward]=e.useState(!1),{rootRef}=e.useContext(DropdownProvider.DropdownContext);e.useLayoutEffect(()=>{containerRef.current!==document.activeElement&&containerRef?.current?.focus()},[]);const checkDropdownPosition=e.useCallback(()=>{const node=containerRef.current;if(node&&targetElement){const rect=node.getBoundingClientRect(),targetRect=targetElement.getBoundingClientRect(),viewportHeight=globalThis.innerHeight,viewportWidth=globalThis.innerWidth,{upward,translateY}=utils.setVerticalPosition(rect,targetRect,viewportHeight);if(displayUpward!==upward&&setDisplayUpward(upward),alignSelf&&"auto"!==alignSelf)node.style.transform=`translateY(${translateY})`;else{const{align,translateX}=utils.setHorizontalPosition(rect,targetRect,viewportWidth);node.style.transform=`translate(${translateX}, ${translateY})`,node.style.alignSelf=align}}},[displayUpward,targetElement]);useInterval.useInterval(checkDropdownPosition,100),e.useEffect(()=>{containerRef.current&&(containerRef.current.style.opacity="1")},[]);const[shouldTriggerClickOutside,setShouldTriggerClickOutside]=e.useState(!1);e.useEffect(()=>{function listener(){setShouldTriggerClickOutside(!0)}return document.addEventListener("mousedown",listener,!0),document.addEventListener("touchstart",listener,!0),()=>{document.removeEventListener("mousedown",listener,!0),document.removeEventListener("touchstart",listener,!0)}},[]),e.useEffect(()=>{function listener(e){onClickOutside(e)}if(shouldTriggerClickOutside)return document.addEventListener("mouseup",listener),document.addEventListener("touchend",listener),()=>{document.removeEventListener("mouseup",listener),document.removeEventListener("touchend",listener)}},[shouldTriggerClickOutside]);return jsxRuntime.jsx(jsxRuntime.Fragment,{children:jsxRuntime.jsxs(Portal,{targetElement,$reverse:displayUpward,rootRef,onMouseDown:()=>setShouldTriggerClickOutside(!1),children:[jsxRuntime.jsx(FakeTarget,{}),jsxRuntime.jsx(Container,{ref:refSetter.refSetter(ref,containerRef),...props,className:className+" dropdown-container",$alignSelf:alignSelf,$dropContainerCssMixin:dropContainerCssMixin})]})})});DropdownContainer.displayName="DropdownContainer";const StyledDropdownContainer=styled__default.default(DropdownContainer)`
  box-shadow: var(--admiral-box-shadow-Shadow08, ${p=>parseShadowFromTheme.parseShadow(p.theme.shadow["Shadow 08"])});
  border-radius: var(--admiral-border-radius-Medium, ${p=>borderRadius.mediumGroupBorderRadius(p.theme.shape)});
  overflow: hidden;
  width: max-content;
  background: var(--admiral-color-Special_ElevatedBG, ${p=>p.theme.color["Special/Elevated BG"]});
`;StyledDropdownContainer.displayName="StyledDropdownContainer",exports.DropdownContainer=DropdownContainer,exports.StyledDropdownContainer=StyledDropdownContainer;
//# sourceMappingURL=index.cjs.js.map
