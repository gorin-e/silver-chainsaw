"use strict";var jsxRuntime=require("react/jsx-runtime"),e=require("react"),styled=require("styled-components"),keyboardKey=require("../common/keyboardKey.cjs.js"),OpenStatusButton=require("../OpenStatusButton.cjs.js"),index$1=require("../DropdownContainer/index.cjs.js"),index=require("../Menu/index.cjs.js");function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var styled__default=_interopDefault(styled);const StyledMenu=styled__default.default(index.Menu)`
  width: ${({$width})=>$width||"auto"};
`,DropMenuContainer=styled__default.default(index$1.StyledDropdownContainer)`
  ${p=>p.$dropContainerCssMixin||""}
`,DropMenu=e.forwardRef(({dimension="m",menuWidth,disabled=!1,loading=!1,alignSelf="flex-end",onClose,onOpen,items,selected,active,onSelectItem,onActivateItem,onChange,onClick,onKeyDown,alignMenuRef,targetElement,renderContentProp,menuMaxHeight,dropContainerCssMixin,dropContainerClassName,dropContainerStyle,multiSelection=!1,disableSelectedOptionHighlight=!1,isVisible,onVisibilityChange=()=>{},onClickOutside,renderTopPanel,renderBottomPanel,onForwardCycleApprove,onBackwardCycleApprove,virtualScroll,...props},ref)=>{const[isMenuOpenState,setIsMenuOpenState]=e.useState(!1),btnRef=e.useRef(null),targetNode=targetElement||alignMenuRef?.current||btnRef.current,isMenuOpen=isVisible??isMenuOpenState,setIsMenuOpen=newMenuOpenState=>{setIsMenuOpenState(newMenuOpenState),onVisibilityChange(newMenuOpenState)},closeMenu=()=>{setIsMenuOpen(!1),onClose?.(),btnRef.current?.focus()};return jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[renderContentProp({disabled,buttonRef:btnRef,handleKeyDown:e=>{const code=keyboardKey.keyboardKey.getCode(e);switch(onKeyDown?.(e),code){case keyboardKey.keyboardKey.Escape:isMenuOpen&&closeMenu();break;case keyboardKey.keyboardKey.Enter:case keyboardKey.keyboardKey[" "]:isMenuOpen||(e.stopPropagation(),setIsMenuOpen(!0),onOpen?.(),e.preventDefault())}},handleClick:e=>{isMenuOpen?onClose?.():onOpen?.(),setIsMenuOpen(!isMenuOpen),onClick?.(e)},statusIcon:jsxRuntime.jsx(OpenStatusButton.OpenStatusButton,{$isOpen:isMenuOpen,"aria-hidden":!0}),menuState:isMenuOpen}),isMenuOpen&&!loading&&jsxRuntime.jsx(DropMenuContainer,{ref,role:"listbox",alignSelf,targetElement:targetNode,onClickOutside:e=>{e.target&&btnRef.current?.contains(e.target)||(onClickOutside?onClickOutside(e):(setIsMenuOpen(!1),onClose?.()))},$dropContainerCssMixin:dropContainerCssMixin,className:dropContainerClassName,style:dropContainerStyle,...props,children:jsxRuntime.jsx(StyledMenu,{maxHeight:menuMaxHeight,$width:menuWidth,virtualScroll,model:items,selected,onSelectItem:id=>{onChange?.(id),onSelectItem?.(id),void 0!==isVisible||multiSelection||disableSelectedOptionHighlight||closeMenu()},dimension,active,onActivateItem,multiSelection,disableSelectedOptionHighlight,renderTopPanel,renderBottomPanel,onForwardCycleApprove,onBackwardCycleApprove})})]})});DropMenu.displayName="DropMenu",exports.DropMenu=DropMenu;
//# sourceMappingURL=index.cjs.js.map
