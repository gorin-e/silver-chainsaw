import{jsxs,jsx}from"react/jsx-runtime";import{useState,useMemo,useEffect}from"react";import styled from"styled-components";import"../containers/HorizontalTabMenuContainer.es.js";import"../containers/IconTabMenuContainer.es.js";import{HorizontalTabsContainer}from"../containers/HorizontalTabsContainer.es.js";import"../containers/VerticalTabMenuContainer.es.js";import"../containers/HorizontalCardTabMenuContainer.es.js";import{ReactComponent as SvgChevronLeftOutline}from"../../../node_modules/@admiral-ds/icons/build/system/ChevronLeftOutline.svg.es.js";import{ReactComponent as SvgChevronRightOutline}from"../../../node_modules/@admiral-ds/icons/build/system/ChevronRightOutline.svg.es.js";import{IconButton}from"../../IconButton/index.es.js";import{FILTER_TAB_SIZE_M,FILTER_TAB_SIZE_S}from"../constants.es.js";const FilterTabsContainer=styled(HorizontalTabsContainer)`
  gap: 4px;
`,Wrapper=styled.div`
  position: relative;
`,LeftButtonContainer=styled.div`
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  padding-right: 4px;
  background-color: ${p=>p.theme.color["Neutral/Neutral 00"]};
`,RightButtonContainer=styled.div`
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  padding-left: 4px;
  background-color: ${p=>p.theme.color["Neutral/Neutral 00"]};
`,FilterTabs=({dimension="m",selectedTabId,defaultSelectedTabId,onSelectTab,tabsId,renderTab,tabIsDisabled,mobile=!1,...props})=>{const[visibleLeftButton,setVisibleLeftButton]=useState(!1),[visibleRightButton,setVisibleRightButton]=useState(!1),[drag,setDrag]=useState(!1),[isMouseDown,setMouseDown]=useState(!1),[containerElement,setContainerElement]=useState(null),[selectedTabInner,setSelectedTabInner]=useState(defaultSelectedTabId),buttonSize="m"===dimension?FILTER_TAB_SIZE_M:FILTER_TAB_SIZE_S,selectedTab=selectedTabId||selectedTabInner,handleSelectTab=tabId=>{if(!tabIsDisabled(tabId)){if(setSelectedTabInner(tabId),onSelectTab?.(tabId),!containerElement)return;const elem=containerElement.querySelector(`[data-tabid="${tabId}"]`);if(mobile)elem.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"});else{const fullButtonWidth=buttonSize+4,tabScrollToLeft=elem.offsetLeft-fullButtonWidth,tabScrollToRight=elem.offsetLeft+elem.clientWidth+fullButtonWidth-containerElement.clientWidth;containerElement.scrollLeft>tabScrollToLeft&&containerElement.scrollTo({left:tabScrollToLeft,behavior:"smooth"}),tabScrollToRight>containerElement.scrollLeft&&containerElement.scrollTo({left:tabScrollToRight,behavior:"smooth"})}}},filterTabs=useMemo(()=>tabsId.map(tabId=>renderTab(tabId,tabId===selectedTab,handleSelectTab)),[tabsId,renderTab,containerElement]),handleScroll=right=>{if(!containerElement)return;const scrollWidth=right?containerElement.scrollLeft-containerElement.clientWidth/3:containerElement.scrollLeft+containerElement.clientWidth/3;containerElement.scrollTo({left:scrollWidth,behavior:"smooth"})};return useEffect(()=>{if(!containerElement||mobile)return;const scrollSetVisible=()=>{const visibleLeft=containerElement.scrollLeft>10,visibleRight=containerElement.clientWidth+containerElement.scrollLeft+10<containerElement.scrollWidth;setVisibleLeftButton(visibleLeft),setVisibleRightButton(visibleRight)};return scrollSetVisible(),containerElement.addEventListener("scroll",scrollSetVisible),()=>{containerElement.removeEventListener("scroll",scrollSetVisible)}},[containerElement]),useEffect(()=>{if(!containerElement)return;const handleWheel=event=>{if(Math.abs(event.deltaX)>Math.abs(event.deltaY))return;let modifier=0;event.deltaMode==event.DOM_DELTA_PIXEL?modifier=1:event.deltaMode==event.DOM_DELTA_LINE?modifier=parseInt(getComputedStyle(containerElement).lineHeight):event.deltaMode==event.DOM_DELTA_PAGE&&(modifier=containerElement.clientHeight),0!=event.deltaY&&(containerElement.scrollLeft+=modifier*event.deltaY),0===containerElement.scrollLeft&&event.deltaY<0||Math.round(containerElement.scrollLeft)>=containerElement.scrollWidth-containerElement.clientWidth||event.preventDefault()};return containerElement.addEventListener("wheel",handleWheel,{passive:!1}),()=>{containerElement.removeEventListener("wheel",handleWheel)}},[containerElement]),useEffect(()=>{if(drag&&!mobile)return globalThis.document.addEventListener("click",captureClick,!0),()=>globalThis.document.removeEventListener("click",captureClick,!0);function captureClick(e){e.preventDefault(),e.stopPropagation(),setMouseDown(!1),setDrag(!1)}},[drag]),useEffect(()=>{if(!isMouseDown||!containerElement||mobile)return;const handleMouseMove=e=>{0!==e.movementX&&(setDrag(!0),containerElement.scrollLeft+=-e.movementX)};return globalThis.document.addEventListener("mousemove",handleMouseMove),()=>{globalThis.document.removeEventListener("mousemove",handleMouseMove)}},[isMouseDown,containerElement]),jsxs(Wrapper,{children:[jsx(FilterTabsContainer,{onMouseDown:e=>{0!==e.button||mobile||setMouseDown(!0)},onMouseUp:()=>setMouseDown(!1),...props,ref:node=>setContainerElement(node),children:filterTabs}),!mobile&&visibleLeftButton&&jsx(LeftButtonContainer,{children:jsx(IconButton,{onClick:()=>handleScroll(!0),dimension,children:jsx(SvgChevronLeftOutline,{})})}),!mobile&&visibleRightButton&&jsx(RightButtonContainer,{children:jsx(IconButton,{onClick:()=>handleScroll(!1),dimension,children:jsx(SvgChevronRightOutline,{})})})]})};FilterTabs.displayName="FilterTabs";export{FilterTabs};
//# sourceMappingURL=FilterTabs.es.js.map
