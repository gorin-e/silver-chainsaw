"use strict";var jsxRuntime=require("react/jsx-runtime"),e=require("react"),styled=require("styled-components");require("../containers/HorizontalTabMenuContainer.cjs.js"),require("../containers/IconTabMenuContainer.cjs.js");var HorizontalTabsContainer=require("../containers/HorizontalTabsContainer.cjs.js");require("../containers/VerticalTabMenuContainer.cjs.js"),require("../containers/HorizontalCardTabMenuContainer.cjs.js");var ChevronLeftOutline=require("../../../node_modules/@admiral-ds/icons/build/system/ChevronLeftOutline.svg.cjs.js"),ChevronRightOutline=require("../../../node_modules/@admiral-ds/icons/build/system/ChevronRightOutline.svg.cjs.js"),index=require("../../IconButton/index.cjs.js"),constants=require("../constants.cjs.js");function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var styled__default=_interopDefault(styled);const FilterTabsContainer=styled__default.default(HorizontalTabsContainer.HorizontalTabsContainer)`
  gap: 4px;
`,Wrapper=styled__default.default.div`
  position: relative;
`,LeftButtonContainer=styled__default.default.div`
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  padding-right: 4px;
  background-color: ${p=>p.theme.color["Neutral/Neutral 00"]};
`,RightButtonContainer=styled__default.default.div`
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  padding-left: 4px;
  background-color: ${p=>p.theme.color["Neutral/Neutral 00"]};
`,FilterTabs=({dimension="m",selectedTabId,defaultSelectedTabId,onSelectTab,tabsId,renderTab,tabIsDisabled,mobile=!1,...props})=>{const[visibleLeftButton,setVisibleLeftButton]=e.useState(!1),[visibleRightButton,setVisibleRightButton]=e.useState(!1),[drag,setDrag]=e.useState(!1),[isMouseDown,setMouseDown]=e.useState(!1),[containerElement,setContainerElement]=e.useState(null),[selectedTabInner,setSelectedTabInner]=e.useState(defaultSelectedTabId),buttonSize="m"===dimension?constants.FILTER_TAB_SIZE_M:constants.FILTER_TAB_SIZE_S,selectedTab=selectedTabId||selectedTabInner,handleSelectTab=tabId=>{if(!tabIsDisabled(tabId)){if(setSelectedTabInner(tabId),onSelectTab?.(tabId),!containerElement)return;const elem=containerElement.querySelector(`[data-tabid="${tabId}"]`);if(mobile)elem.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"});else{const fullButtonWidth=buttonSize+4,tabScrollToLeft=elem.offsetLeft-fullButtonWidth,tabScrollToRight=elem.offsetLeft+elem.clientWidth+fullButtonWidth-containerElement.clientWidth;containerElement.scrollLeft>tabScrollToLeft&&containerElement.scrollTo({left:tabScrollToLeft,behavior:"smooth"}),tabScrollToRight>containerElement.scrollLeft&&containerElement.scrollTo({left:tabScrollToRight,behavior:"smooth"})}}},filterTabs=e.useMemo(()=>tabsId.map(tabId=>renderTab(tabId,tabId===selectedTab,handleSelectTab)),[tabsId,renderTab,containerElement]),handleScroll=right=>{if(!containerElement)return;const scrollWidth=right?containerElement.scrollLeft-containerElement.clientWidth/3:containerElement.scrollLeft+containerElement.clientWidth/3;containerElement.scrollTo({left:scrollWidth,behavior:"smooth"})};return e.useEffect(()=>{if(!containerElement||mobile)return;const scrollSetVisible=()=>{const visibleLeft=containerElement.scrollLeft>10,visibleRight=containerElement.clientWidth+containerElement.scrollLeft+10<containerElement.scrollWidth;setVisibleLeftButton(visibleLeft),setVisibleRightButton(visibleRight)};return scrollSetVisible(),containerElement.addEventListener("scroll",scrollSetVisible),()=>{containerElement.removeEventListener("scroll",scrollSetVisible)}},[containerElement]),e.useEffect(()=>{if(!containerElement)return;const handleWheel=event=>{if(Math.abs(event.deltaX)>Math.abs(event.deltaY))return;let modifier=0;event.deltaMode==event.DOM_DELTA_PIXEL?modifier=1:event.deltaMode==event.DOM_DELTA_LINE?modifier=parseInt(getComputedStyle(containerElement).lineHeight):event.deltaMode==event.DOM_DELTA_PAGE&&(modifier=containerElement.clientHeight),0!=event.deltaY&&(containerElement.scrollLeft+=modifier*event.deltaY),0===containerElement.scrollLeft&&event.deltaY<0||Math.round(containerElement.scrollLeft)>=containerElement.scrollWidth-containerElement.clientWidth||event.preventDefault()};return containerElement.addEventListener("wheel",handleWheel,{passive:!1}),()=>{containerElement.removeEventListener("wheel",handleWheel)}},[containerElement]),e.useEffect(()=>{if(drag&&!mobile)return globalThis.document.addEventListener("click",captureClick,!0),()=>globalThis.document.removeEventListener("click",captureClick,!0);function captureClick(e){e.preventDefault(),e.stopPropagation(),setMouseDown(!1),setDrag(!1)}},[drag]),e.useEffect(()=>{if(!isMouseDown||!containerElement||mobile)return;const handleMouseMove=e=>{0!==e.movementX&&(setDrag(!0),containerElement.scrollLeft+=-e.movementX)};return globalThis.document.addEventListener("mousemove",handleMouseMove),()=>{globalThis.document.removeEventListener("mousemove",handleMouseMove)}},[isMouseDown,containerElement]),jsxRuntime.jsxs(Wrapper,{children:[jsxRuntime.jsx(FilterTabsContainer,{onMouseDown:e=>{0!==e.button||mobile||setMouseDown(!0)},onMouseUp:()=>setMouseDown(!1),...props,ref:node=>setContainerElement(node),children:filterTabs}),!mobile&&visibleLeftButton&&jsxRuntime.jsx(LeftButtonContainer,{children:jsxRuntime.jsx(index.IconButton,{onClick:()=>handleScroll(!0),dimension,children:jsxRuntime.jsx(ChevronLeftOutline.ReactComponent,{})})}),!mobile&&visibleRightButton&&jsxRuntime.jsx(RightButtonContainer,{children:jsxRuntime.jsx(index.IconButton,{onClick:()=>handleScroll(!1),dimension,children:jsxRuntime.jsx(ChevronRightOutline.ReactComponent,{})})})]})};FilterTabs.displayName="FilterTabs",exports.FilterTabs=FilterTabs;
//# sourceMappingURL=FilterTabs.cjs.js.map
