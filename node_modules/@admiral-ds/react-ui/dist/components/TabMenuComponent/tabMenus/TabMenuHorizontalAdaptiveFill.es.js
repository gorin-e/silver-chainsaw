import{jsxs,jsx}from"react/jsx-runtime";import{useState,useRef,useMemo,useLayoutEffect,useEffect}from"react";import styled from"styled-components";import{ActiveHorizontalTabSelector}from"../containerElements/ActiveHorizontalTabSelector.es.js";import"../containerElements/ActiveVerticalTabSelector.es.js";import"../containerElements/SlideArrowButton.es.js";import"../containerElements/HorizontalTabOverflowMenu.es.js";import"../containerElements/VerticalTabOverflowMenu.es.js";import"../containerElements/HorizontalAddTabButton.es.js";import"../containerElements/VerticalAddTabButton.es.js";import{HorizontalTabMenuContainer}from"../containers/HorizontalTabMenuContainer.es.js";import"../containers/IconTabMenuContainer.es.js";import"../containers/HorizontalTabsContainer.es.js";import"../containers/VerticalTabMenuContainer.es.js";import"../containers/HorizontalCardTabMenuContainer.es.js";import{getTabWidthMap,getActiveTabWidth}from"../utils.es.js";import{debounce}from"../../common/utils/debounce.es.js";const Wrapper=styled.div`
  position: relative;
  width: 100%;
`,TabMenuHorizontalAdaptiveFill=({appearance="primary",showUnderline,selectedTabId,defaultSelectedTabId,onSelectTab,tabsId,renderTab,tabIsDisabled,showActiveTabSelector,...props})=>{const[selectedTabInner,setSelectedTabInner]=useState(defaultSelectedTabId),[underlineLeft,setUnderlineLeft]=useState(0),[underlineWidth,setUnderlineWidth]=useState(0),[tabWidthMap,setTabWidthMap]=useState([]),selectedTab=selectedTabId||selectedTabInner,containerRef=useRef(null),handleSelectTab=tabId=>{tabIsDisabled(tabId)||(setSelectedTabInner(tabId),onSelectTab?.(tabId))},horizontalTabs=useMemo(()=>tabsId.map(tabId=>renderTab(tabId,tabId===selectedTab,handleSelectTab)),[tabsId,renderTab]);useLayoutEffect(()=>{const setTabWidth=()=>{if(containerRef.current){const tabWidth=getTabWidthMap(tabsId,containerRef.current.children);setTabWidthMap(tabWidth)}};if(containerRef.current){const resizeObserver=new ResizeObserver(debounce(setTabWidth,100));return resizeObserver.observe(containerRef.current),()=>{resizeObserver.disconnect()}}},[]);const getUnderlinePosition=()=>{const width=selectedTab?getActiveTabWidth(tabWidthMap,selectedTab):0;return{left:(()=>{const index=tabsId.findIndex(tab=>tab===selectedTab);if(index<0)return 0;let left=0;for(let i=0;i<index;i++)left+=tabWidthMap.find(tab=>tab.tabId===tabsId[i])?.width||0;return left})(),width}};return useEffect(()=>{showActiveTabSelector&&(()=>{const{left,width}=getUnderlinePosition();setUnderlineWidth(width),setUnderlineLeft(left)})()},[selectedTab,horizontalTabs,tabWidthMap]),jsxs(Wrapper,{...props,children:[jsx(HorizontalTabMenuContainer,{ref:containerRef,$showUnderline:showUnderline,$showActiveTabSelector:showActiveTabSelector,children:horizontalTabs}),showActiveTabSelector&&jsx(ActiveHorizontalTabSelector,{$appearance:appearance,$left:`${underlineLeft}px`,$width:`${underlineWidth}px`,$transition:!0})]})};TabMenuHorizontalAdaptiveFill.displayName="TabMenuHorizontalAdaptiveFill";export{TabMenuHorizontalAdaptiveFill};
//# sourceMappingURL=TabMenuHorizontalAdaptiveFill.es.js.map
