"use strict";var jsxRuntime=require("react/jsx-runtime"),e=require("react"),styled=require("styled-components"),debounce=require("../../common/utils/debounce.cjs.js"),ArrowLeftOutline=require("../../../node_modules/@admiral-ds/icons/build/system/ArrowLeftOutline.svg.cjs.js"),ArrowRightOutline=require("../../../node_modules/@admiral-ds/icons/build/system/ArrowRightOutline.svg.cjs.js");require("../containers/HorizontalTabMenuContainer.cjs.js");var IconTabMenuContainer=require("../containers/IconTabMenuContainer.cjs.js");require("../containers/HorizontalTabsContainer.cjs.js"),require("../containers/VerticalTabMenuContainer.cjs.js"),require("../containers/HorizontalCardTabMenuContainer.cjs.js");var ActiveHorizontalTabSelector=require("../containerElements/ActiveHorizontalTabSelector.cjs.js");require("../containerElements/ActiveVerticalTabSelector.cjs.js");var SlideArrowButton=require("../containerElements/SlideArrowButton.cjs.js");require("../containerElements/HorizontalTabOverflowMenu.cjs.js"),require("../containerElements/VerticalTabOverflowMenu.cjs.js"),require("../containerElements/HorizontalAddTabButton.cjs.js"),require("../containerElements/VerticalAddTabButton.cjs.js");var utils=require("../utils.cjs.js");function _interopDefault(e){return e&&e.__esModule?e:{default:e}}const StyledSlideArrow=_interopDefault(styled).default(SlideArrowButton.SlideArrowButton)`
  position: absolute;
  top: 18px;
  ${p=>"left"===p.$direction?"left: 0":"right: 0"};
`,TabMenuIcon=({showUnderline,selectedTabId,defaultSelectedTabId,onSelectTab,tabsId,renderTab,tabIsDisabled,scrollStep=160,...props})=>{const scrollingContainerRef=e.useRef(null),[scrollingContainerLeft,setScrollingContainerLeft]=e.useState(0),[scrolledToRight,setScrolledToRight]=e.useState(!1),[prevDisabled,setPrevDisabled]=e.useState(!0),[nextDisabled,setNextDisabled]=e.useState(!1);e.useLayoutEffect(()=>{if(!scrollingContainerRef.current)return;const parent=scrollingContainerRef.current.parentElement;setPrevDisabled(0===scrollingContainerLeft);const newNextDisabled=scrollingContainerLeft+parent.clientWidth>=scrollingContainerRef.current.scrollWidth;setNextDisabled(newNextDisabled),setScrolledToRight(newNextDisabled)});const[selectedTabInner,setSelectedTabInner]=e.useState(defaultSelectedTabId),selectedTab=selectedTabId||selectedTabInner,handleSelectTab=tabId=>{tabIsDisabled(tabId)||(setSelectedTabInner(tabId),onSelectTab?.(tabId))},iconTabs=e.useMemo(()=>tabsId.map(tabId=>renderTab(tabId,tabId===selectedTab,handleSelectTab)),[tabsId,renderTab]),[tabWidthMap,setTabWidthMap]=e.useState([]);e.useEffect(()=>{if(scrollingContainerRef.current?.firstElementChild){const resizeObserver=new ResizeObserver(debounce.debounce(function(){if(scrollingContainerRef.current){const tabWidth=utils.getTabWidthMap(tabsId,scrollingContainerRef.current.children);setTabWidthMap(tabWidth)}},100));return resizeObserver.observe(scrollingContainerRef.current?.firstElementChild),()=>{resizeObserver.disconnect()}}},[scrollingContainerRef,iconTabs]);const[underlineLeft,setUnderlineLeft]=e.useState(0),[underlineWidth,setUnderlineWidth]=e.useState(0);return e.useEffect(()=>{(()=>{const{left,width}=utils.getUnderlinePosition(tabWidthMap,selectedTabId);setUnderlineWidth(width),setUnderlineLeft(left)})()},[selectedTab,tabWidthMap]),jsxRuntime.jsxs(IconTabMenuContainer.IconTabMenuWrapper,{...props,children:[jsxRuntime.jsx(IconTabMenuContainer.IconTabMenuScrollingContainerWrapper,{children:jsxRuntime.jsxs(IconTabMenuContainer.IconTabMenuScrollingContainer,{$showUnderline:showUnderline,ref:scrollingContainerRef,$leftValue:scrolledToRight?`${scrollingContainerLeft}px`:0,$floatValue:scrolledToRight?"inline-end":"inline-start",$translateXValue:-scrollingContainerLeft+"px",children:[iconTabs,jsxRuntime.jsx(ActiveHorizontalTabSelector.ActiveHorizontalTabSelector,{$left:`${underlineLeft}px`,$width:`${underlineWidth}px`,$transition:!0})]})}),!prevDisabled&&jsxRuntime.jsx(StyledSlideArrow,{$direction:"left",onClick:()=>{scrolledToRight&&setScrolledToRight(!1),setScrollingContainerLeft(prev=>prev-scrollStep<0?0:prev-scrollStep)},children:jsxRuntime.jsx(ArrowLeftOutline.ReactComponent,{})}),!nextDisabled&&jsxRuntime.jsx(StyledSlideArrow,{$direction:"right",onClick:()=>{if(!scrollingContainerRef.current)return;const parent=scrollingContainerRef.current.parentElement,newValue=scrollingContainerLeft+scrollStep,maxValue=scrollingContainerRef.current.scrollWidth-parent.clientWidth;(newValue>maxValue?maxValue:newValue)===maxValue&&setScrolledToRight(!0),setScrollingContainerLeft(newValue>maxValue?maxValue:newValue)},children:jsxRuntime.jsx(ArrowRightOutline.ReactComponent,{})})]})};TabMenuIcon.displayName="TabMenuIcon",exports.TabMenuIcon=TabMenuIcon;
//# sourceMappingURL=TabMenuIcon.cjs.js.map
