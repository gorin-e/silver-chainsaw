"use strict";var jsxRuntime=require("react/jsx-runtime"),e=require("react"),uid=require("../common/uid.cjs.js"),ToastItem=require("./ToastItem.cjs.js");const ToastContext=e.createContext({});function makeToastList(prevList,newToast){return prevList.every(item=>item.id!==newToast.id)?[newToast,...prevList]:prevList}exports.ToastContext=ToastContext,exports.ToastProvider=({autoDeleteTime,...props})=>{const[toasts,setToast]=e.useState([]),[toastItemList,setToastItemList]=e.useState([]),addToast=e.useCallback(toast=>{const id=uid.uid(),newToast={...toast,id};setToast(prevToasts=>makeToastList(prevToasts,newToast));const renderDefaultNotificationItem=()=>{const handleOnClose=()=>{removeToastItem({id,renderToast:renderDefaultNotificationItem})};return jsxRuntime.jsx(jsxRuntime.Fragment,{children:autoDeleteTime?jsxRuntime.jsx(ToastItem.ToastItemWithAutoDelete,{onRemoveNotification:handleOnClose,autoDeleteTime,children:jsxRuntime.jsx(ToastItem.DefaultToastItem,{...toast,onClose:toast.onClose||handleOnClose})}):jsxRuntime.jsx(ToastItem.DefaultToastItem,{...toast,onClose:toast.onClose||handleOnClose})})},newRenderToast={id,renderToast:renderDefaultNotificationItem};return setToastItemList(prevToasts=>makeToastList(prevToasts,newRenderToast)),id},[]),removeToast=e.useCallback(removeToast=>{setToast(prevToasts=>prevToasts.filter(({id})=>id!==removeToast.id)),setToastItemList(prevToasts=>prevToasts.filter(({id})=>id!==removeToast.id))},[]),removeById=e.useCallback(toastId=>{setToast(prevToasts=>prevToasts.filter(({id})=>id!==toastId)),setToastItemList(prevToasts=>prevToasts.filter(({id})=>id!==toastId))},[]),addToastItem=e.useCallback(toastItem=>{setToast(prevToasts=>makeToastList(prevToasts,{id:toastItem.id})),setToastItemList(prevToasts=>makeToastList(prevToasts,toastItem))},[]),findToastItemById=toastId=>toastItemList.find(item=>item.id===toastId),removeToastItem=e.useCallback(removeToast=>{setToast(prevToasts=>prevToasts.filter(({id})=>id!==removeToast.id)),setToastItemList(prevToasts=>prevToasts.filter(toast=>toast.renderToast!==removeToast.renderToast))},[]),providerValue=e.useMemo(()=>({addToast,removeToast,removeById,addToastItem,findToastItemById,removeToastItem,toasts,toastItemList,autoDeleteTime}),[addToast,removeToast,removeById,addToastItem,findToastItemById,removeToastItem,toasts,toastItemList,autoDeleteTime]);return jsxRuntime.jsx(ToastContext.Provider,{value:providerValue,children:props.children})};
//# sourceMappingURL=ToastProvider.cjs.js.map
