import{jsx,jsxs}from"react/jsx-runtime";import{useState,useRef,useEffect}from"react";import styled,{useTheme,css}from"styled-components";import{LIGHT_THEME}from"../themes/light/index.es.js";import"../themes/common/locales.es.js";import{typography}from"../Typography/typography.es.js";import"../Typography/defaultTypographyMixin.es.js";import{ReactComponent as SvgChevronLeftOutline}from"../../node_modules/@admiral-ds/icons/build/system/ChevronLeftOutline.svg.es.js";import{ReactComponent as SvgChevronRightOutline}from"../../node_modules/@admiral-ds/icons/build/system/ChevronRightOutline.svg.es.js";import{MenuButton}from"./Menu.es.js";import{passDropdownDataAttributes}from"../common/utils/splitDataAttributes.es.js";import{MenuActionsPanel}from"../Menu/MenuActionsPanel.es.js";import{TextInput}from"../input/TextInput/index.es.js";import"../input/DateInput/index.es.js";import"../input/SuggestInput/index.es.js";import"../input/Select/index.es.js";import"../input/TextArea/index.es.js";import"../input/TimeInput/index.es.js";import"../input/SliderInput/index.es.js";import"../input/FileUploader/index.es.js";import"../input/SliderRange/index.es.js";import"../input/NumberInput/index.es.js";import"../input/Container.es.js";import"../input/StatusIcon.es.js";import"../input/EditMode/index.es.js";import"../input/EditModeArea/index.es.js";import"../input/PhoneNumberInput/index.es.js";import"../input/InputEx/index.es.js";import"../input/FileInput/index.es.js";import"../input/FileInput/FileItem.es.js";import"../input/DateTime/index.es.js";import"../input/MultiInput/index.es.js";import"../input/InputLine/index.es.js";import"../input/TreeSelect/index.es.js";import{keyboardKey}from"../common/keyboardKey.es.js";import{Button}from"../Button/index.es.js";const ComplexWrapper=styled.div`
  display: flex;
  align-items: center;
  ${typography["Body/Body 2 Long"]}
  white-space: nowrap;
  user-select: none;
  min-width: 696px;
  justify-content: space-between;
  color: var(--admiral-color-Neutral_Neutral90, ${p=>p.theme.color["Neutral/Neutral 90"]});
`,SimpleWrapper=styled(ComplexWrapper)`
  min-width: auto;
`,Part=styled.div`
  display: flex;
  align-items: center;
`,Divider=styled.div`
  width: 1px;
  height: 24px;
  background-color: var(--admiral-color-Neutral_Neutral20, ${p=>p.theme.color["Neutral/Neutral 20"]});
`,PageAdditional=styled.span`
  margin: 0 4px;
  min-width: 112px;
`,PageSizeAdditional=styled.div`
  min-width: 172px;
  margin: 0 12px;
  [data-simple='true'] & {
    margin: 0;
  }
`,ButtonsWrapper=styled.div`
  display: flex;
  & > button {
    margin-left: 8px;
  }
  [data-simple='true'] & {
    margin-left: 20px;
  }
`,extendMixin=(mixin,showPageNumberInput)=>css`
  width: auto;
  min-width: ${showPageNumberInput?80:68}px;

  ${mixin};
`,nothing=()=>{},PaginationOne=({dimension="m",page,pageSize,pageSizes,totalItems,pageSelectDisabled=!1,pageSizeSelectDisabled=!1,onChange,simple=!1,menuWidth,dropMaxHeight="",dropContainerCssMixin,pageSizeDropContainerStyle,pageNumberDropContainerStyle,locale,showPageNumberInput=!1,leftButtonPropsConfig=nothing,rightButtonPropsConfig=nothing,...props})=>{const theme=useTheme()||LIGHT_THEME,{itemsPerPageText:theme_itemsPerPageText,itemRangeText:theme_itemRangeText,pageRangeText:theme_pageRangeText,pageSelectLabel:theme_pageSelectLabel,pageSizeSelectLabel:theme_pageSizeSelectLabel,backwardText:theme_backwardText,forwardText:theme_forwardText}=theme.locales[theme.currentLocale].paginationOne,itemsPerPageText=locale?.itemsPerPageText||theme_itemsPerPageText,itemRangeText=locale?.itemRangeText||theme_itemRangeText,pageRangeText=locale?.pageRangeText||theme_pageRangeText,pageSelectLabel=locale?.pageSelectLabel||theme_pageSelectLabel,pageSizeSelectLabel=locale?.pageSizeSelectLabel||theme_pageSizeSelectLabel,backwardText=locale?.backwardText||theme_backwardText,forwardText=locale?.forwardText||theme_forwardText,totalPages=Math.max(Math.ceil(totalItems/pageSize),1),pages=Array.from({length:totalPages},(_,k)=>k+1),backButtonDisabled=1===page,forwardButtonDisabled=page===totalPages,[isVisible,setIsVisible]=useState(!1),[selectedPageNumber,setSelectedPageNumber]=useState(page.toString()),[activePageNumber,setActivePageNumber]=useState(page.toString()),[inputPageNumber,setInputPageNumber]=useState(page.toString()),pageNumberInputRef=useRef(null),parsePageNumber=pageSelected=>{if(""===pageSelected)return Number.parseInt(selectedPageNumber,10);const page=Number.parseInt(pageSelected,10);return Number.isNaN(page)||page<1?1:page>totalPages?totalPages:page},handlePageInputHover=activePage=>{activePage&&(setActivePageNumber(activePage),setInputPageNumber(activePage))},handleClosePageNumberDropMenu=pageNumber=>{handlePageInputHover(pageNumber),setIsVisible(!1)},handleSizeChange=pageSizeSelected=>{const pageSize=Number.parseInt(pageSizeSelected,10);onChange({page:1,pageSize})},handlePageInputChange=pageSelected=>{const page=parsePageNumber(pageSelected);setSelectedPageNumber(page.toString()),onChange({page,pageSize}),handleClosePageNumberDropMenu(page.toString())},dropMenuProps=passDropdownDataAttributes(props),handleClickOutside=()=>{handleClosePageNumberDropMenu(selectedPageNumber)},handleMenuButtonClick=()=>{isVisible?handleClosePageNumberDropMenu(selectedPageNumber):setIsVisible(!0)};useEffect(()=>{isVisible&&pageNumberInputRef&&(pageNumberInputRef.current?.select(),pageNumberInputRef.current?.focus())},[isVisible]);const handleInputPageNumberChange=e=>{let inputValue=e.target.value;inputValue=inputValue.replace(/\D/g,""),setInputPageNumber(inputValue),setActivePageNumber(parsePageNumber(inputValue).toString())},handleInputPageNumberKeyDown=e=>{const code=keyboardKey.getCode(e);code===keyboardKey.Enter?(handlePageInputChange(inputPageNumber),setIsVisible(!1)):code===keyboardKey.ArrowDown||code===keyboardKey.ArrowUp?pageNumberInputRef.current?.blur():code===keyboardKey.Escape&&handleClosePageNumberDropMenu(selectedPageNumber)},handleMenuCycle=()=>(pageNumberInputRef.current?.focus(),!1),leftButtonProps={appearance:"tertiary",dimension,iconStart:jsx(SvgChevronLeftOutline,{}),displayAsSquare:!0,"aria-label":backwardText,disabled:backButtonDisabled,onClick:()=>{const newPage=page-1;setSelectedPageNumber(newPage.toString()),setActivePageNumber(newPage.toString()),onChange({page:newPage,pageSize})}},rightButtonProps={appearance:"tertiary",dimension,iconStart:jsx(SvgChevronRightOutline,{}),displayAsSquare:!0,"aria-label":forwardText,disabled:forwardButtonDisabled,onClick:()=>{const newPage=page+1;setSelectedPageNumber(newPage.toString()),setActivePageNumber(newPage.toString()),onChange({page:newPage,pageSize})}};return simple?jsxs(SimpleWrapper,{"data-simple":simple,...props,children:[jsx(PageSizeAdditional,{children:itemRangeText(Math.min(pageSize*(page-1)+1,totalItems),Math.min(page*pageSize,totalItems),totalItems)}),jsxs(ButtonsWrapper,{children:[jsx(Button,{...leftButtonProps,...leftButtonPropsConfig(leftButtonProps)}),jsx(Button,{...rightButtonProps,...rightButtonPropsConfig(rightButtonProps)})]})]}):jsxs(ComplexWrapper,{"data-simple":simple,...props,children:[jsxs(Part,{children:[itemsPerPageText,jsx(MenuButton,{dimension,options:pageSizes,selected:pageSize.toString(),onSelectItem:handleSizeChange,disabled:pageSizeSelectDisabled,"aria-label":pageSizeSelectLabel(pageSize,totalItems),menuMaxHeight:pageSizeDropContainerStyle?.menuMaxHeight||dropMaxHeight,dropContainerCssMixin:pageSizeDropContainerStyle?.dropContainerCssMixin||extendMixin(dropContainerCssMixin),dropContainerClassName:pageSizeDropContainerStyle?.dropContainerClassName,dropContainerStyle:pageSizeDropContainerStyle?.dropContainerStyle,menuWidth:pageSizeDropContainerStyle?.menuWidth||menuWidth,dropMenuDataAttributes:dropMenuProps,className:"records-per-page-with-dropdown",children:pageSize}),jsx(Divider,{}),jsx(PageSizeAdditional,{children:itemRangeText(Math.min(pageSize*(page-1)+1,totalItems),Math.min(page*pageSize,totalItems),totalItems)})]}),jsxs(Part,{children:[jsx(Divider,{}),jsx(MenuButton,{dimension,options:pages,selected:selectedPageNumber,onSelectItem:handlePageInputChange,active:activePageNumber,onActivateItem:handlePageInputHover,disabled:pageSelectDisabled,"aria-label":pageSelectLabel(page,totalPages),menuMaxHeight:pageNumberDropContainerStyle?.menuMaxHeight||dropMaxHeight,dropContainerCssMixin:pageNumberDropContainerStyle?.dropContainerCssMixin||extendMixin(dropContainerCssMixin,showPageNumberInput),dropContainerClassName:pageNumberDropContainerStyle?.dropContainerClassName,dropContainerStyle:pageNumberDropContainerStyle?.dropContainerStyle,menuWidth:pageNumberDropContainerStyle?.menuWidth||menuWidth,dropMenuDataAttributes:dropMenuProps,className:"current-page-number-with-dropdown",isVisible,onVisibilityChange:setIsVisible,onClickOutside:handleClickOutside,onClick:handleMenuButtonClick,onForwardCycleApprove:handleMenuCycle,onBackwardCycleApprove:handleMenuCycle,renderTopPanel:showPageNumberInput?({dimension="s"})=>jsx(MenuActionsPanel,{dimension,children:jsx(TextInput,{dimension:"s",value:inputPageNumber,onChange:handleInputPageNumberChange,onKeyDown:handleInputPageNumberKeyDown,ref:pageNumberInputRef})}):void 0,children:page}),jsx(PageAdditional,{children:pageRangeText(totalPages)}),jsxs(ButtonsWrapper,{children:[jsx(Button,{...leftButtonProps,...leftButtonPropsConfig(leftButtonProps)}),jsx(Button,{...rightButtonProps,...rightButtonPropsConfig(rightButtonProps)})]})]})]})};PaginationOne.displayName="PaginationOne";export{PaginationOne};
//# sourceMappingURL=index.es.js.map
