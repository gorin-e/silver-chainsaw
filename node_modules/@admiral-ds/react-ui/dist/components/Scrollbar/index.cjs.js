"use strict";var jsxRuntime=require("react/jsx-runtime"),e=require("react"),styled=require("styled-components"),useComposedRefs=require("../common/hooks/useComposedRefs.cjs.js"),observeRect=require("../common/observeRect.cjs.js"),fixedForwardRef=require("../common/fixedForwardRef.cjs.js");function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var styled__default=_interopDefault(styled);const hideNativeScrollbarsCss=styled.css`
  overflow: scroll;
  -ms-overflow-style: none;
  scrollbar-width: none;
  &::-webkit-scrollbar {
    display: none;
  }
`,Container=styled__default.default.div`
  position: relative;
  display: flex;
  flex-direction: column;
  overflow: hidden;
`,HiddenNativeScroll=styled__default.default.div`
  ${hideNativeScrollbarsCss}
`,VerticalContainer=styled__default.default.div`
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  width: 10px;
`,HorizontalContainer=styled__default.default.div`
  position: absolute;
  left: 0;
  bottom: 0;
  right: 0;
  height: 10px;
`,VerticalScrollThumbZone=styled__default.default.div`
  pointer-events: none;
  position: absolute;
  top: 0;
  bottom: 0;
  border-block: 4px solid transparent;
`,HorizontalScrollThumbZone=styled__default.default.div`
  pointer-events: none;
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  border-inline: 4px solid transparent;
`,HorizontalTrack=styled__default.default.div`
  box-sizing: border-box;
  height: 100%;
  cursor: pointer;
  &:hover {
    background-color: ${p=>p.theme.color["Opacity/Hover"]};
  }
  box-sizing: border-box;
`,HorizontalThumb=styled__default.default.div`
  pointer-events: all;
  position: relative;
  height: 6px;
  border-radius: 6px;
  background-color: ${p=>p.theme.color["Opacity/Neutral 16"]};
  width: var(${"--horizontal-thumb-width"}, 20px);
`,VerticalTrack=styled__default.default.div`
  box-sizing: border-box;
  height: 100%;
  cursor: pointer;
  &:hover {
    background-color: ${p=>p.theme.color["Opacity/Hover"]};
  }
  box-sizing: border-box;
`,VerticalThumb=styled__default.default.div`
  pointer-events: all;
  position: relative;
  width: 6px;
  border-radius: 6px;
  background-color: ${p=>p.theme.color["Opacity/Neutral 16"]};
  height: var(${"--vertical-thumb-height"}, 20px);
`,ScrollContainer=fixedForwardRef.fixedForwardRef(({children,verticalScrollProps,horizontalScrollProps,minThumbSize=20,contentBlockProps={},...props},ref)=>{const scrollAriaId=e.useMemo(()=>contentBlockProps.id?contentBlockProps.id:`scroll-aria-${Math.random().toString(36).substring(2,12)}`,[contentBlockProps.id]),[contentNode,setContenetNode]=e.useState(null),composedContentRef=useComposedRefs.useComposedRefs(contentBlockProps.ref,node=>setContenetNode(node));return jsxRuntime.jsxs(Container,{ref,...props,children:[jsxRuntime.jsx(HiddenNativeScroll,{...contentBlockProps,id:scrollAriaId,ref:composedContentRef,children}),jsxRuntime.jsx(Scrollbars,{contentNode,verticalScrollProps,horizontalScrollProps,minThumbSize})]})}),Scrollbars=({verticalScrollProps={},horizontalScrollProps={},contentNode,minThumbSize=20})=>{const scrollAriaId=e.useMemo(()=>contentNode?.id?contentNode?.id:`scroll-aria-${Math.random().toString(36).substring(2,12)}`,[contentNode?.id]),[verticalScrollAreaNode,setVerticalScrollAreaNode]=e.useState(null),[verticalScrollThumbZoneNode,setVerticalScrollThumbZoneNode]=e.useState(null),[horizontalScrollAreaNode,setHorizontalScrollAreaNode]=e.useState(null),[horizontalScrollThumbZoneNode,setHorizontalScrollThumbZoneNode]=e.useState(null),[verticalThumbNode,setVerticalThumbNode]=e.useState(null),[horizontalThumbNode,setHorizontalThumbNode]=e.useState(null),[isVerticalDragging,setIsVerticalDragging]=e.useState(!1),[isHorizontalDragging,setIsHorizontalDragging]=e.useState(!1),[scrollTopStartPosition,setScrollTopStartPosition]=e.useState(0),[scrollLeftStartPosition,setScrollLeftStartPosition]=e.useState(0),[initialContentScrollTop,setInitialContentScrollTop]=e.useState(0),[initialContentScrollLeft,setInitialContentScrollLeft]=e.useState(0),[scrollYNedded,setScrollYNeeded]=e.useState(0),[scrollXNedded,setScrollXNeeded]=e.useState(0),composedVerticalScrollAreaRef=useComposedRefs.useComposedRefs(verticalScrollProps.ref,node=>setVerticalScrollAreaNode(node)),composedHorizontalScrollAreaRef=useComposedRefs.useComposedRefs(horizontalScrollProps.ref,node=>setHorizontalScrollAreaNode(node));return e.useLayoutEffect(()=>{if(contentNode&&verticalThumbNode&&horizontalThumbNode&&verticalScrollAreaNode&&horizontalScrollAreaNode&&verticalScrollThumbZoneNode&&horizontalScrollThumbZoneNode){const{observe,unobserve}=observeRect(contentNode,rect=>{if(rect){const isYOverflow=function(node){const{clientHeight:contentVisible,scrollHeight:contentTotalHeight}=node;return contentTotalHeight-contentVisible>=1}(contentNode),isXOverflow=function(node){const{clientWidth,scrollWidth}=node;return scrollWidth-clientWidth>=1}(contentNode),verticalScroll=Math.min(Math.max(0,rect.scrollTop),rect.scrollHeight-rect.height),horizontalSroll=Math.min(Math.max(0,rect.scrollLeft),rect.scrollWidth-rect.width);contentNode.style.setProperty("--vertical-content-scroll",`${verticalScroll}px`),contentNode.style.setProperty("--horizontal-content-scroll",`${horizontalSroll}px`),verticalScrollAreaNode.style.setProperty("display",isYOverflow?null:"none"),verticalScrollAreaNode.style.setProperty("bottom",isXOverflow?"10px":null),horizontalScrollAreaNode.style.setProperty("display",isXOverflow?null:"none"),horizontalScrollAreaNode.style.setProperty("right",isYOverflow?"10px":null);const verticalThumbHeight=function(node,verticalScrollThumbZoneNode){const{clientHeight,scrollHeight}=node,{clientHeight:verticalThumbScrollHeight}=verticalScrollThumbZoneNode;return Math.max(Math.round(clientHeight*verticalThumbScrollHeight/scrollHeight),minThumbSize)}(contentNode,verticalScrollThumbZoneNode),horizontalThumbWidth=function(node,horizontalScrollThumbZoneNode){const{clientWidth,scrollWidth}=node,{clientWidth:horizontalThumbScrollWidth}=horizontalScrollThumbZoneNode;return Math.max(Math.round(clientWidth*horizontalThumbScrollWidth/scrollWidth),minThumbSize)}(contentNode,horizontalScrollThumbZoneNode);verticalThumbNode.style.setProperty("--vertical-thumb-height",`${verticalThumbHeight}px`),horizontalThumbNode.style.setProperty("--horizontal-thumb-width",`${horizontalThumbWidth}px`);const{scrollTop,scrollLeft,scrollHeight,scrollWidth}=contentNode,{clientHeight}=verticalScrollThumbZoneNode,{clientWidth}=horizontalScrollThumbZoneNode,newTop=Math.round(Math.min(scrollTop/scrollHeight*clientHeight,clientHeight-verticalThumbHeight)),newLeft=Math.round(Math.min(scrollLeft/scrollWidth*clientWidth,clientWidth-horizontalThumbWidth));verticalThumbNode.style.top=`${newTop}px`,horizontalThumbNode.style.left=`${newLeft}px`}});return observe(),unobserve}},[contentNode,verticalThumbNode,horizontalThumbNode,verticalScrollAreaNode,horizontalScrollAreaNode,verticalScrollThumbZoneNode,horizontalScrollThumbZoneNode]),e.useEffect(()=>{function handleThumbMouseup(e){e.preventDefault(),e.stopPropagation(),isVerticalDragging&&setIsVerticalDragging(!1),isHorizontalDragging&&setIsHorizontalDragging(!1)}function handleThumbMousemove(e){if(contentNode){if(e.preventDefault(),e.stopPropagation(),isVerticalDragging){const{scrollHeight,clientHeight}=contentNode,deltaY=(e.clientY-scrollTopStartPosition)*(scrollHeight/clientHeight),newScrollTop=Math.round(Math.min(initialContentScrollTop+deltaY,scrollHeight-clientHeight));contentNode.scrollTop=newScrollTop}if(isHorizontalDragging){const{scrollWidth,clientWidth}=contentNode,deltaX=(e.clientX-scrollLeftStartPosition)*(scrollWidth/clientWidth),newScrollLeft=Math.round(Math.min(initialContentScrollLeft+deltaX,scrollWidth-clientWidth));contentNode.scrollLeft=newScrollLeft}}}if(isVerticalDragging||isHorizontalDragging)return document.addEventListener("mousemove",handleThumbMousemove),document.addEventListener("mouseup",handleThumbMouseup),()=>{document.removeEventListener("mousemove",handleThumbMousemove),document.removeEventListener("mouseup",handleThumbMouseup)}},[contentNode,isVerticalDragging,isHorizontalDragging,initialContentScrollTop,initialContentScrollLeft,scrollTopStartPosition,scrollLeftStartPosition]),e.useEffect(()=>{if(contentNode){const{scrollHeight,clientHeight}=contentNode,top=Math.round(scrollYNedded*scrollHeight-clientHeight/2);contentNode.scrollTo({top,behavior:"smooth"})}},[scrollYNedded]),e.useEffect(()=>{if(contentNode){const{scrollWidth,clientWidth}=contentNode,left=Math.round(scrollXNedded*scrollWidth-clientWidth/2);contentNode.scrollTo({left,behavior:"smooth"})}},[scrollXNedded]),e.useEffect(()=>{document.body.style.setProperty("cursor",isVerticalDragging||isHorizontalDragging?"grabbing":null)},[isVerticalDragging,isHorizontalDragging]),jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[jsxRuntime.jsxs(VerticalContainer,{...verticalScrollProps,ref:composedVerticalScrollAreaRef,role:"scrollbar","aria-controls":scrollAriaId,children:[jsxRuntime.jsx(VerticalTrack,{onClick:function(e){if(e.preventDefault(),e.stopPropagation(),contentNode){const{clientHeight}=contentNode,{top}=contentNode.getBoundingClientRect();setScrollYNeeded((e.clientY-top)/clientHeight)}}}),jsxRuntime.jsx(VerticalScrollThumbZone,{ref:node=>setVerticalScrollThumbZoneNode(node),children:jsxRuntime.jsx(VerticalThumb,{ref:setVerticalThumbNode,onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),setScrollTopStartPosition(e.clientY),contentNode&&setInitialContentScrollTop(contentNode.scrollTop),setIsVerticalDragging(!0)},style:{cursor:isVerticalDragging?"grabbing":"grab"}})})]}),jsxRuntime.jsxs(HorizontalContainer,{...horizontalScrollProps,ref:composedHorizontalScrollAreaRef,role:"scrollbar","aria-controls":scrollAriaId,children:[jsxRuntime.jsx(HorizontalTrack,{onClick:function(e){if(e.preventDefault(),e.stopPropagation(),contentNode){const{clientWidth}=contentNode,{left}=contentNode.getBoundingClientRect();setScrollXNeeded((e.clientX-left)/clientWidth)}}}),jsxRuntime.jsx(HorizontalScrollThumbZone,{ref:node=>setHorizontalScrollThumbZoneNode(node),children:jsxRuntime.jsx(HorizontalThumb,{ref:setHorizontalThumbNode,onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),setScrollLeftStartPosition(e.clientX),contentNode&&setInitialContentScrollLeft(contentNode.scrollLeft),setIsHorizontalDragging(!0)},style:{cursor:isHorizontalDragging?"grabbing":"grab"}})})]})]})};exports.ScrollContainer=ScrollContainer,exports.Scrollbars=Scrollbars,exports.hideNativeScrollbarsCss=hideNativeScrollbarsCss;
//# sourceMappingURL=index.cjs.js.map
